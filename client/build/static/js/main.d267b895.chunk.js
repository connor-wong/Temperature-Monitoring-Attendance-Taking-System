(this.webpackJsonpraspitar=this.webpackJsonpraspitar||[]).push([[0],{122:function(e,t){},228:function(e,t,n){},765:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(31),a=n.n(r),o=(n(228),n(9)),s=n(17),i=n.n(s),l=n(141),j=n(211),d=n(24),u=n(56),h=new u.c({UserPoolId:"ap-southeast-1_LW7VL5TAI",ClientId:"n4hbcid1kla9n4mktonhu7fmk"}),b=n(45),x=n.n(b),O=n(2),f=Object(c.createContext)(),g=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!1),b=Object(o.a)(s,2),g=b[0],m=b[1],p=Object(c.useState)(""),w=Object(o.a)(p,2),S=w[0],y=w[1],v=Object(c.useState)(""),C=Object(o.a)(v,2),k=C[0],N=C[1],D=Object(c.useState)(""),A=Object(o.a)(D,2),W=A[0],E=A[1],B=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n=h.getCurrentUser();n?n.getSession(function(){var c=Object(d.a)(i.a.mark((function c(r,a){var o;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!r){c.next=4;break}t(),c.next=8;break;case 4:return c.next=6,new Promise((function(e,t){n.getUserAttributes((function(n,c){if(n)t(n);else{var r,a={},o=Object(j.a)(c);try{for(o.s();!(r=o.n()).done;){var s=r.value,i=s.Name,l=s.Value;a[i]=l}}catch(n){o.e(n)}finally{o.f()}E(a.email),x.a.post("/drive/email",a.email),e(a)}}))}));case 6:o=c.sent,e(Object(l.a)(Object(l.a)({user:n},a),o));case 8:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()):t()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,c){var r=new u.b({Username:t,Pool:h}),o=new u.a({Username:t,Password:n});r.authenticateUser(o,{onSuccess:function(t){console.log("onSuccess:",t),m(!0),e(t)},onFailure:function(e){console.error("onFailure:",e),m(!1),c(e)},newPasswordRequired:function(t){console.log("newPasswordRequired:",t),a(!0),y(r),N(t),e(t)}})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(O.jsx)(f.Provider,{value:{authenticate:T,getSession:B,logout:function(){var e=h.getCurrentUser();e&&(e.signOut(),window.location.reload(!1))},login:g,isFirstLogin:r,user:S,userAttr:k,userEmail:W},children:e.children})},m=n(773),p=n(774),w=n(212),S=n(781),y=n(775),v=n(776),C=function(){var e=Object(c.useContext)(f),t=e.user,n=e.userAttr,r=Object(c.useState)(""),a=Object(o.a)(r,2),s=a[0],i=a[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),d=j[0],u=j[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),x=b[0],g=b[1];return Object(O.jsx)("div",{children:Object(O.jsx)(m.a,{className:"newpassword",fluid:!0,children:Object(O.jsx)(p.a,{children:Object(O.jsxs)(w.a,{children:[Object(O.jsx)("h3",{style:{fontSize:"calc(1rem + 2vw)",fontWeight:"bold"},children:"Logging in for the first time?"}),Object(O.jsx)("h3",{style:{fontSize:"calc(1rem + 1vw)",fontWeight:"normal",color:"#848484"},children:"Set your new password"}),Object(O.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),delete n.email_verified,s===d?t.completeNewPasswordChallenge(s,n,{onSuccess:function(e){g("New password created successfully."),console.log(e),window.location.reload(!1)},onFailure:function(e){g("Error, please contact administrator."),console.log(e)}}):g("Passwords does not match.")},children:[Object(O.jsx)(S.a.Group,{controlId:"formBasicNewPassword",children:Object(O.jsx)(S.a.Control,{type:"password",value:s,placeholder:"New Password",onChange:function(e){return i(e.target.value)}})}),Object(O.jsx)(S.a.Group,{controlId:"formBasicConfirmPassword",children:Object(O.jsx)(S.a.Control,{type:"password",value:d,placeholder:"Confirm Password",onChange:function(e){return u(e.target.value)}})}),Object(O.jsx)(y.a,{type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},children:"Reset Password"})]}),Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},onClick:function(){window.location.reload(!1)},children:"Cancel"}),Object(O.jsx)("h3",{style:{fontSize:"18px",color:"red",textAlign:"center"},children:x})]})})})})},k=function(){var e=Object(c.useState)(1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(""),d=Object(o.a)(j,2),b=d[0],x=d[1],f=Object(c.useState)(""),g=Object(o.a)(f,2),m=g[0],p=g[1],w=Object(c.useState)(""),v=Object(o.a)(w,2),C=v[0],k=v[1],N=Object(c.useState)(""),D=Object(o.a)(N,2),A=D[0],W=D[1],E=function(){return new u.b({Username:i.toLowerCase(),Pool:h})};return Object(O.jsxs)("div",{children:[1===n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{fontSize:"calc(2rem + 2vw)",fontWeight:"bold",marginBottom:"20px"},children:"Forget Password?"}),Object(O.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),E().forgotPassword({onSuccess:function(e){console.log("onSuccess:",e)},onFailure:function(e){console.error("onFailure:",e)},inputVerificationCode:function(e){console.log("Input code:",e),r(2)}})},children:[Object(O.jsx)(S.a.Group,{controlId:"formBasicEmail",children:Object(O.jsx)(S.a.Control,{type:"email",value:i,placeholder:"Email",onChange:function(e){return l(e.target.value)}})}),Object(O.jsx)(y.a,{type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},children:"Send verification code"})]}),Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px"},onClick:function(){window.location.reload(!1)},children:"Cancel"})]}),2===n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{fontSize:"calc(2rem + 2vw)",fontWeight:"bold",marginBottom:"20px"},children:"Set New Password"}),Object(O.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),m===C?E().confirmPassword(b,m,{onSuccess:function(e){W("Password reset successfully."),console.log("onSuccess:",e),window.location.reload(!1)},onFailure:function(e){W("Incorrect verification code."),console.error("onFailure:",e)}}):W("Passwords does not match.")},children:[Object(O.jsx)(S.a.Group,{controlId:"formBasicEmail",children:Object(O.jsx)(S.a.Control,{value:b,placeholder:"Verification Code",onChange:function(e){return x(e.target.value)}})}),Object(O.jsx)(S.a.Group,{controlId:"formBasicNewPassword",children:Object(O.jsx)(S.a.Control,{type:"password",value:m,placeholder:"New Password",onChange:function(e){return p(e.target.value)}})}),Object(O.jsx)(S.a.Group,{controlId:"formBasicConfirmPassword",children:Object(O.jsx)(S.a.Control,{type:"password",value:C,placeholder:"Confirm Password",onChange:function(e){return k(e.target.value)}})}),Object(O.jsx)(y.a,{type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},children:"Reset Password"})]}),Object(O.jsx)("h3",{style:{fontSize:"18px",color:"red",textAlign:"center"},children:A})]})]})},N=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(1),d=Object(o.a)(j,2),u=d[0],h=d[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),g=x[0],N=x[1],D=Object(c.useState)(!1),A=Object(o.a)(D,2),W=A[0],E=A[1],B=Object(c.useContext)(f),T=B.authenticate,P=B.isFirstLogin;return Object(O.jsx)("div",{children:Object(O.jsx)(m.a,{className:"login text-center",fluid:!0,children:Object(O.jsxs)(p.a,{style:{height:"100vh"},children:[Object(O.jsx)(w.a,{className:"login-left",xl:6,lg:12,md:12,sm:12,xs:12,children:Object(O.jsxs)("div",{className:"login-title",children:[Object(O.jsx)("h3",{children:"RASPITAR"}),Object(O.jsx)("h3",{style:{textDecoration:"underline"},children:"WEB"})]})}),Object(O.jsx)(w.a,{className:"login-right",xl:6,lg:12,md:12,sm:12,xs:12,children:Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{className:"login-area",children:P?Object(O.jsx)(C,{}):Object(O.jsx)(O.Fragment,{children:1===u?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h3",{style:{fontSize:"calc(2rem + 2vw)",fontWeight:"bold",textAlign:"left"},children:"Hello there,"}),Object(O.jsx)("h3",{style:{fontSize:"calc(1rem + 1vw)",fontWeight:"normal",color:"#848484",textAlign:"left"},children:"Login to your account"}),Object(O.jsxs)(S.a,{onSubmit:function(e){e.preventDefault(),T(n,i).then((function(e){console.log("Logged in!",e),E(!0)})).catch((function(e){console.error("Failed to login!",e),N("Incorrect username or password."),E(!1)}))},children:[Object(O.jsx)(S.a.Group,{controlId:"formBasicEmail",children:Object(O.jsx)(S.a.Control,{type:"email",placeholder:"Email",onChange:function(e){return r(e.target.value)}})}),Object(O.jsx)(S.a.Group,{controlId:"formBasicPassword",children:Object(O.jsx)(S.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return l(e.target.value)}})}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},children:W?Object(O.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(O.jsx)("span",{children:"Log in"})})]}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},onClick:function(){h(2)},children:"Forget Password"}),Object(O.jsx)("h3",{style:{fontSize:"18px",color:"red",textAlign:"center"},children:g})]}):Object(O.jsx)(k,{})})})})})]})})})},D=n(22),A=n(783),W=n(784),E=n(780),B=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(!1),d=Object(o.a)(j,2),u=d[0],h=d[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),g=x[0],m=x[1],p=Object(c.useContext)(f),w=p.getSession,C=p.authenticate;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(S.a,{onSubmit:function(e){h(!0),e.preventDefault(),w().then((function(e){var t=e.user,c=e.email;C(c,n).then((function(){t.changePassword(n,i,(function(e,t){e?(m("Wrong Password"),console.error(e)):console.log(t)}))}))}))},children:[Object(O.jsx)(S.a.Group,{controlId:"formBasicEmail",children:Object(O.jsx)(S.a.Control,{type:"password",placeholder:"Old Password",value:n,onChange:function(e){return r(e.target.value)}})}),Object(O.jsx)(S.a.Group,{controlId:"formBasicPassword",children:Object(O.jsx)(S.a.Control,{type:"password",placeholder:"New Password",onChange:function(e){return l(e.target.value)}})}),Object(O.jsx)(y.a,{variant:"primary",type:"submit",style:{width:"100%",backgroundColor:"#3241c9",fontSize:"22px",marginBottom:"10px"},children:u?Object(O.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(O.jsx)("span",{children:"Change Password"})}),Object(O.jsx)("h3",{style:{fontSize:"18px",color:"red",textAlign:"center"},children:g})]})})},T=function(){var e=Object(c.useContext)(f),t=e.logout,n=e.userEmail,r=Object(c.useState)(!1),a=Object(o.a)(r,2),s=a[0],i=a[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),d=j[0],u=j[1];return s&&setTimeout((function(){t()}),1500),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(A.a,{className:"navbar",collapseOnSelect:!0,expand:"lg",children:[Object(O.jsxs)(A.a.Brand,{style:{display:"flex"},children:[Object(O.jsx)("h3",{style:{fontSize:"32px",fontWeight:"bold",color:"white"},children:"RASPITAR"}),Object(O.jsx)("h3",{style:{textDecoration:"underline",marginLeft:"10px",fontSize:"32px",fontWeight:"bold",color:"white"},children:"WEB"})]}),Object(O.jsx)(A.a.Toggle,{"aria-controls":"responsive-navbar-nav",style:{backgroundColor:"white"}}),Object(O.jsx)(A.a.Collapse,{className:"justify-content-end",id:"responsive-navbar-nav",children:Object(O.jsxs)(W.a,{children:[Object(O.jsxs)(A.a.Text,{style:{marginRight:"10px",marginBottom:"10px",color:"white",fontSize:"18px"},children:["Signed in as: ",n]}),Object(O.jsx)(y.a,{style:{marginRight:"10px",marginBottom:"10px",backgroundColor:"white",color:"black",fontWeight:"bold",fontSize:"18px"},onClick:function(){return u(!0)},children:"Change Password"}),Object(O.jsx)(y.a,{style:{marginRight:"10px",marginBottom:"10px",backgroundColor:"white",color:"black",fontWeight:"bold",fontSize:"18px"},onClick:function(){i(!0)},children:s?Object(O.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(O.jsx)("span",{children:"Log Out"})})]})})]}),Object(O.jsxs)(E.a,{onHide:function(){return u(!1)},show:d,size:"lg",centered:!0,children:[Object(O.jsx)(E.a.Header,{children:Object(O.jsx)(E.a.Title,{children:"Change Password"})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsx)(B,{})}),Object(O.jsx)(E.a.Footer,{children:Object(O.jsx)(y.a,{onClick:function(){return u(!1)},children:"Cancel"})})]})]})},P=n(785),I=n(778),z=n(782),F=n(18),L=n.n(F),U=n(787),R=n(108),_=n.n(R),J=n(66),H=n.n(J),K=function(e){var t=e.date,n=e.setUpdateData,r=Object(c.useState)(!0),a=Object(o.a)(r,2),s=a[0],l=a[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),h=u[0],b=u[1],x=Object(c.useState)([]),f=Object(o.a)(x,2),g=f[0],C=f[1],k=Object(c.useState)([]),N=Object(o.a)(k,2),A=N[0],W=N[1],E=Object(c.useState)(""),B=Object(o.a)(E,2),T=B[0],P=B[1],I=Object(c.useState)([]),z=Object(o.a)(I,2),F=z[0],L=z[1],R=Object(c.useState)(!1),J=Object(o.a)(R,2),K=J[0],G=J[1],V=Object(c.useState)([]),M=Object(o.a)(V,2),Y=M[0],q=M[1],Q=Object(c.useState)([]),X=Object(o.a)(Q,2),Z=X[0],$=X[1],ee=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),te=ee.AWS_DEFAULT_REGION,ne=ee.AWS_ACCESS_KEY_ID,ce=ee.AWS_SECRET_ACCESS_KEY;H.a.config.update({region:te,accessKeyId:ne,secretAccessKey:ce});var re=new H.a.DynamoDB.DocumentClient,ae="March";Object(c.useEffect)((function(){var e,n=!0,c=[];return function(){var r=Object(d.a)(i.a.mark((function r(){var a,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/aws/api").then((function(e){return e.json()}));case 2:return a=r.sent,r.next=5,fetch("/sheet/student").then((function(e){return e.json()}));case 5:r.sent.forEach((function(e){c.push({Name:e[0],ID:e[1]})})),a.sort((function(e,t){return new Date(t.Date)-new Date(e.Date)})),o=a.filter((function(e){return e.Date.includes(t)})),e=c.filter((function(e){var t=e.Name;return!o.some((function(e){return e.Name===t}))})),n&&(P(o[0].Class),C(o),L(e),W(c),l(!1));case 11:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()(),function(){n=!1}}),[t]);var oe=function(){var e=Object(d.a)(i.a.mark((function e(){var c,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/aws/api").then((function(e){return e.json()}));case 2:(c=e.sent).sort((function(e,t){return new Date(t.Date)-new Date(e.Date)})),r=c.filter((function(e){return e.Date.includes(t)})),a=A.filter((function(e){var t=e.Name;return!r.some((function(e){return e.Name===t}))})),C(r),L(a),n(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(m.a,{className:"selected-attendance text-center",fluid:!0,children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"white",textAlign:"left"},children:t})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:s?Object(O.jsx)(v.a,{animation:"border",style:{color:"white"}}):Object(O.jsxs)(U.a,{children:[Object(O.jsx)("h3",{style:{color:"white"},children:"Attended"}),g.map((function(e){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"left"},children:e.Name}),Object(O.jsxs)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"right"},children:[e.Temperature," \xb0C"]}),!0===K&&Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,children:Object(O.jsx)(S.a.Check,{type:"checkbox",defaultChecked:!0,onChange:function(t){!function(e,t){var n=e.target.checked,c=Object(D.a)(Y);n?(c=c.filter((function(e){return e.Name!==t.Name})),q(c)):(c=[].concat(Object(D.a)(Y),[t]),q(c))}(t,e)}})})]})},e.Name)})),Object(O.jsx)("h3",{style:{color:"white",marginTop:"5px"},children:"Absent"}),F.map((function(e){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"left"},children:e.Name}),Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"right"},children:e.ID}),!0===K&&Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,children:Object(O.jsx)(S.a.Check,{type:"checkbox",onChange:function(t){!function(e,t){var n=e.target.checked,c=Object(D.a)(Z);n?(c=[].concat(Object(D.a)(Z),[t]),$(c)):(c=c.filter((function(e){return e.Name!==t.Name})),$(c))}(t,e)}})})]})},e.Name)}))]})})}),!1===K&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderColor:"#007bff"},onClick:function(){return G(!0)},children:"Edit"})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(_.a,{data:g,filename:t+" "+T+".csv",style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderRadius:"5px",borderColor:"#007bff",padding:".375rem .75rem"},children:"Download"})})})]}),!0===K&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{disabled:0===Y.length&&0===Z.length,style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderColor:"#007bff"},onClick:function(){b(!0),Z.forEach((function(e){var n={TableName:ae,Item:{Date:t,Name:e.Name,Class:T,"Student ID":e.ID}};re.put(n,(function(e,t){e?console.error("Unable to add item. Error JSON:",JSON.stringify(e,null,2)):console.log("Added item:",JSON.stringify(t,null,2))}))})),Y.forEach((function(e){var t={TableName:ae,Key:{Date:e.Date,Name:e.Name}};re.delete(t,(function(e,t){e?console.error("Unable to delete item. Error JSON:",JSON.stringify(e,null,2)):console.log("DeleteItem succeeded:",JSON.stringify(t,null,2))}))})),setTimeout((function(){b(!1),G(!1),$([]),q([]),oe()}),1500)},children:h?Object(O.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(O.jsx)("span",{children:"Save"})})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderColor:"#007bff"},onClick:function(){$([]),q([]),G(!1)},children:"Cancel"})})})]})]})})},G=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!0),s=Object(o.a)(a,2),l=s[0],j=s[1];return Object(c.useEffect)((function(){var e=!0;return function(){var t=Object(d.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/sheet/student").then((function(e){return e.json()}));case 2:n=t.sent,e&&(r(n),j(!1));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(m.a,{className:"text-center studentlist",children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"white",textAlign:"left",marginTop:"10px",marginBottom:"10px"},children:"Student List"})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:l?Object(O.jsx)(v.a,{animation:"border",style:{color:"white"}}):Object(O.jsx)(U.a,{children:n.map((function(e){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:9,lg:9,md:9,sm:9,xs:9,style:{textAlign:"left",fontSize:"calc(0.5rem + 0.6vw)",fontWeight:"bold",color:"#535353"},children:e[0]}),Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,style:{textAlign:"right",fontSize:"calc(0.5rem + 0.6vw)",fontWeight:"bold",color:"#535353"},children:e[1]})]})},e[1])}))})})})]})})},V=function(e){var t=e.attendance,n=e.isLoading,r=e.setUpdateData,a=Object(c.useState)(!1),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(""),d=Object(o.a)(j,2),u=d[0],h=d[1],b=Object(c.useState)(""),f=Object(o.a)(b,2),g=f[0],S=f[1],v=Object(c.useState)(""),C=Object(o.a)(v,2),k=C[0],N=C[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(m.a,{className:"latest-attendance text-center",fluid:!0,children:[Object(O.jsx)("h3",{style:{color:"white",textAlign:"left"},children:"Latest Attendance"}),n?Object(O.jsx)(p.a,{style:{marginBottom:"10px",textAlign:"left"},children:Object(O.jsx)(w.a,{children:Object(O.jsxs)(F.SkeletonTheme,{color:"#2e3896",highlightColor:"#1f276e",children:[Object(O.jsx)(L.a,{count:1,height:30,width:"60%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:3,height:30,width:"100%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:1,height:30,width:"80%"})]})})}):Object(O.jsx)(p.a,{children:t.map((function(e){return Object(O.jsx)(w.a,{xl:4,lg:4,md:4,sm:12,xs:12,children:Object(O.jsxs)(P.a,{style:{backgroundColor:"white",borderRadius:"10px",marginBottom:"10px"},children:[Object(O.jsxs)(P.a.Header,{children:[Object(O.jsxs)("strong",{className:"mr-auto",children:[e.Date," "]}),Object(O.jsx)("strong",{children:e.Class})]}),Object(O.jsxs)(P.a.Body,{children:[Object(O.jsxs)("svg",{viewBox:"0 0 400 400",children:[Object(O.jsx)(I.a,{standalone:!1,padAngle:0,innerRadius:110,width:400,height:400,data:[{key:"",y:e.Present},{key:"",y:e.Total_Students-e.Present}],colorScale:["#3e4ccd","#EEEEEE"],style:{labels:{display:"none"}}}),Object(O.jsx)(z.a,{textAnchor:"middle",style:{fontSize:"50px",fontWeight:"bold",fill:"#535353"},x:200,y:200,text:e.Present+" / "+e.Total_Students})]}),Object(O.jsx)(y.a,{id:e.Class,value:e.Date,onClick:function(e){!function(e){x.a.post("/sheet/class",e.target.id),l(!0),S(e.currentTarget.value),h(e.target.id)}(e)},style:{backgroundColor:"#3e4ccd",width:"90%",fontWeight:"bold"},children:"Explore"})]})]})},e.Class)}))})]}),Object(O.jsxs)(E.a,{className:"text-center",size:"lg",show:i,onHide:function(){l(!1),N("")},children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"#535353"},children:u})})}),Object(O.jsxs)(E.a.Body,{children:[Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{width:"100%",backgroundColor:"#3e4ccd",fontWeight:"bold"},onClick:function(){return N("View")},children:"View"})}),Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"#3e4ccd",fontWeight:"bold"},onClick:function(){return N("Student")},children:"Students"})})]}),Object(O.jsx)(p.a,{children:Object(O.jsxs)(w.a,{children:["View"===k&&Object(O.jsx)(K,{date:g,setUpdateData:r}),"Student"===k&&Object(O.jsx)(G,{})]})})]})]})]})},M=n(786),Y=n(779),q=n(777),Q=function(e){var t=e.temperatureMatter,n=e.lowAttendanceMatter,r=e.isLoading,a=Object(c.useState)([]),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)([]),d=Object(o.a)(j,2),u=d[0],h=d[1];Object(c.useEffect)((function(){var e=!0,t=[],c=[],r=[];return n.forEach((function(e){t.push(e.Class)})),(t=Object(D.a)(new Set(t))).forEach((function(e){c=n.filter((function(t){return t.Class.includes(e)})),r.push({Class:e,Student:c})})),e&&l(r),function(){e=!1}}),[n]);var b=function(e){var t;t=n.filter((function(t){return t.Class.includes(e.target.value)})),h(t)},x=Object(O.jsxs)(M.a,{style:{width:"100%"},children:[Object(O.jsx)(M.a.Title,{as:"h3",style:{fontWeight:"bold",color:"#535353"},children:"Students"}),Object(O.jsx)(M.a.Content,{style:{backgroundColor:"#3e4ccd"},children:Object(O.jsx)(U.a,{children:u.map((function(e,t){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:8,lg:8,md:8,sm:8,xs:8,style:{textAlign:"left",fontWeight:"bold",color:"#535353"},children:e.Name}),Object(O.jsx)(w.a,{xl:4,lg:4,md:4,sm:4,xs:4,style:{textAlign:"right",fontWeight:"bold",color:"#535353"},children:e.ID})]})},t)}))})})]});return Object(O.jsxs)(m.a,{className:"student-matters text-center",fluid:!0,children:[Object(O.jsx)("h3",{style:{color:"white",textAlign:"left"},children:"Student Matters"}),Object(O.jsxs)(p.a,{style:{marginBottom:"10px"},children:[Object(O.jsxs)(w.a,{xl:6,lg:6,md:6,sm:12,xs:12,children:[Object(O.jsx)("h3",{style:{color:"white",fontSize:"22px",textAlign:"left"},children:"High Temperature"}),r?Object(O.jsx)(p.a,{style:{marginBottom:"10px",textAlign:"left"},children:Object(O.jsx)(w.a,{children:Object(O.jsxs)(F.SkeletonTheme,{color:"#2e3896",highlightColor:"#1f276e",children:[Object(O.jsx)(L.a,{count:1,height:30,width:"60%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:3,height:30,width:"100%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:1,height:30,width:"80%"})]})})}):Object(O.jsxs)(O.Fragment,{children:[0===t.length&&Object(O.jsx)("h3",{style:{color:"white"},children:"No Data"}),t.length>0&&Object(O.jsx)(p.a,{style:{marginBottom:"10px"},children:t.map((function(e,t){return Object(O.jsx)(w.a,{xl:12,lg:12,md:12,sm:12,xs:12,children:Object(O.jsxs)(P.a,{style:{marginBottom:"5px"},children:[Object(O.jsxs)(P.a.Header,{children:[Object(O.jsx)("strong",{className:"mr-auto",children:e.Name}),Object(O.jsx)("strong",{children:e.Class})]}),Object(O.jsxs)(P.a.Body,{style:{color:"#535353",fontWeight:"bold",textAlign:"left"},children:[e.Temperature," \xb0C \u2003 ",e.Date]})]})},t)}))})]})]}),Object(O.jsxs)(w.a,{xl:6,lg:6,md:6,sm:12,xs:12,children:[Object(O.jsx)("h3",{style:{color:"white",fontSize:"22px",textAlign:"left"},children:"Low Attendance"}),r?Object(O.jsx)(p.a,{style:{marginBottom:"10px",textAlign:"left"},children:Object(O.jsx)(w.a,{children:Object(O.jsxs)(F.SkeletonTheme,{color:"#2e3896",highlightColor:"#1f276e",children:[Object(O.jsx)(L.a,{count:1,height:30,width:"60%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:3,height:30,width:"100%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:1,height:30,width:"80%"})]})})}):Object(O.jsxs)(O.Fragment,{children:[0===i.length&&Object(O.jsx)("h3",{style:{color:"white"},children:"No Data"}),i.length>0&&Object(O.jsx)(p.a,{children:i.map((function(e,t){return Object(O.jsx)(w.a,{xl:12,lg:12,md:12,sm:12,xs:12,children:Object(O.jsx)(Y.a,{trigger:"click",placement:"bottom",overlay:x,children:Object(O.jsxs)(q.a,{className:"mb-2",style:{width:"100%"},children:[Object(O.jsx)(y.a,{style:{color:"#535353",backgroundColor:"white",fontWeight:"bold",borderColor:"white"},value:e.Class,onClick:function(e){return b(e)},children:e.Class}),Object(O.jsxs)(y.a,{style:{color:"white",backgroundColor:"#CDBF3E",fontWeight:"bold",borderColor:"#CDBF3E"},value:e.Class,onClick:function(e){return b(e)},children:[e.Student.length," ALERTS"]})]})})},t)}))})]})]})]})]})},X=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)([]),l=Object(o.a)(s,2),j=l[0],u=l[1],h=Object(c.useState)([]),b=Object(o.a)(h,2),x=b[0],f=b[1],g=Object(c.useState)(!1),C=Object(o.a)(g,2),k=C[0],N=C[1],A=Object(c.useState)(""),W=Object(o.a)(A,2),E=W[0],B=W[1],T=Object(c.useState)(""),P=Object(o.a)(T,2),I=P[0],z=P[1],F=Object(c.useState)([]),L=Object(o.a)(F,2),R=L[0],J=L[1],K=Object(c.useState)([]),G=Object(o.a)(K,2),V=G[0],M=G[1],Y=Object(c.useState)(!0),q=Object(o.a)(Y,2),Q=q[0],X=q[1],Z=Object(c.useState)(!1),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(!1),ce=Object(o.a)(ne,2),re=ce[0],ae=ce[1],oe=Object(c.useState)([]),se=Object(o.a)(oe,2),ie=se[0],le=se[1],je=Object(c.useState)([]),de=Object(o.a)(je,2),ue=de[0],he=de[1],be=e.setUpdateData;H.a.config.update({region:"ap-southeast-1",accessKeyId:"AKIAVT4QMHKTJR6VFAEN",secretAccessKey:"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"});var xe=new H.a.DynamoDB.DocumentClient,Oe="March";Object(c.useEffect)((function(){var e=!0,t=[],n=[];return function(){var c=Object(d.a)(i.a.mark((function c(){var r;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("/aws/api").then((function(e){return e.json()}));case 2:return r=c.sent,c.next=5,fetch("/sheet/student").then((function(e){return e.json()}));case 5:c.sent.forEach((function(e){n.push({Name:e[0],ID:e[1]})})),r.sort((function(e,t){return new Date(t.Date)-new Date(e.Date)})),r.forEach((function(e){t.push(e.Date.split(" ")[0])})),t=Object(D.a)(new Set(t)),e&&(a(r),f(t),J(n),X(!1));case 11:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}()(),function(){e=!1}}),[]);var fe=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/aws/api").then((function(e){return e.json()}));case 2:(t=e.sent).sort((function(e,t){return new Date(t.Date)-new Date(e.Date)})),n=t.filter((function(e){return e.Date.includes(E)})),c=R.filter((function(e){var t=e.Name;return!n.some((function(e){return e.Name===t}))})),u(n),M(c),be(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(m.a,{className:"text-center attendancelist",children:k?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"white",textAlign:"left",marginTop:"10px",marginBottom:"10px"},children:E})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)("h3",{style:{color:"white"},children:"Attended"}),j.map((function(e){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"left"},children:e.Name}),Object(O.jsxs)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"right"},children:[e.Temperature," \xb0C"]}),!0===re&&Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,children:Object(O.jsx)(S.a.Check,{type:"checkbox",defaultChecked:!0,onChange:function(t){!function(e,t){var n=e.target.checked,c=Object(D.a)(ie);n?(c=c.filter((function(e){return e.Name!==t.Name})),le(c)):(c=[].concat(Object(D.a)(ie),[t]),le(c))}(t,e)}})})]})},e.Name)})),Object(O.jsx)("h3",{style:{color:"white",marginTop:"5px"},children:"Absent"}),V.map((function(e){return Object(O.jsx)(U.a.Item,{children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"left"},children:e.Name}),Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:"bold",fontSize:"calc(0.5rem + 0.6vw)",color:"#535353",textAlign:"right"},children:e.ID}),!0===re&&Object(O.jsx)(w.a,{xl:3,lg:3,md:3,sm:3,xs:3,children:Object(O.jsx)(S.a.Check,{type:"checkbox",onChange:function(t){!function(e,t){var n=e.target.checked,c=Object(D.a)(ue);n?(c=[].concat(Object(D.a)(ue),[t]),he(c)):(c=c.filter((function(e){return e.Name!==t.Name})),he(c))}(t,e)}})})]})},e.Name)}))]})})}),!1===re&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px"},onClick:function(){return ae(!0)},children:"Edit"})}),Object(O.jsx)(w.a,{children:Object(O.jsx)(_.a,{data:j,filename:E+" "+I+".csv",style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderRadius:"5px",borderColor:"#007bff",padding:".375rem .75rem"},children:"Download"})})]}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px"},onClick:function(){return N(!1)},children:"Back"})})})]}),!0===re&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{disabled:0===ie.length&&0===ue.length,style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderColor:"#007bff"},onClick:function(){te(!0),ue.forEach((function(e){var t={TableName:Oe,Item:{Date:E,Name:e.Name,Class:I,"Student ID":e.ID}};xe.put(t,(function(e,t){e?console.error("Unable to add item. Error JSON:",JSON.stringify(e,null,2)):console.log("Added item:",JSON.stringify(t,null,2))}))})),ie.forEach((function(e){var t={TableName:Oe,Key:{Date:e.Date,Name:e.Name}};xe.delete(t,(function(e,t){e?console.error("Unable to delete item. Error JSON:",JSON.stringify(e,null,2)):console.log("DeleteItem succeeded:",JSON.stringify(t,null,2))}))})),setTimeout((function(){te(!1),ae(!1),he([]),le([]),fe()}),1500)},children:ee?Object(O.jsx)(v.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(O.jsx)("span",{children:"Save"})})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"white",color:"#535353",fontWeight:"bold",marginTop:"10px",borderColor:"#007bff"},onClick:function(){he([]),le([]),ae(!1)},children:"Cancel"})})})]})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"white",textAlign:"left",marginTop:"10px",marginBottom:"10px"},children:"Attendance List"})})}),Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Q?Object(O.jsx)(v.a,{animation:"border",style:{color:"white"}}):Object(O.jsxs)(O.Fragment,{children:[0===x.length&&Object(O.jsx)("h3",{style:{color:"white"},children:"No Data"}),x.length>0&&Object(O.jsx)(U.a,{children:x.map((function(e){return Object(O.jsx)(U.a.Item,{id:e,action:!0,onClick:function(e){return function(e){var t,n=e,c=r.filter((function(e){return e.Date.includes(n)}));t=R.filter((function(e){var t=e.Name;return!c.some((function(e){return e.Name===t}))})),z(c[0].Class),B(e),u(c),M(t),N(!0)}(e.target.id)},style:{fontWeight:"bold",color:"#535353"},children:e},e)}))})]})})})]})})})},Z=function(e){var t=e.classes,n=e.isLoading,r=e.setUpdateData,a=Object(c.useState)(!1),s=Object(o.a)(a,2),i=s[0],l=s[1],j=Object(c.useState)(""),d=Object(o.a)(j,2),u=d[0],h=d[1],b=Object(c.useState)(""),f=Object(o.a)(b,2),g=f[0],S=f[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(m.a,{className:"classes text-center",fluid:!0,children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{color:"white",textAlign:"left"},children:"Your Classes"})})}),n?Object(O.jsx)(p.a,{style:{marginBottom:"10px",textAlign:"left"},children:Object(O.jsx)(w.a,{children:Object(O.jsxs)(F.SkeletonTheme,{color:"#2e3896",highlightColor:"#1f276e",children:[Object(O.jsx)(L.a,{count:1,height:30,width:"60%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:3,height:30,width:"100%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:1,height:30,width:"80%"}),Object(O.jsx)(L.a,{count:1,height:30,width:"60%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:3,height:30,width:"100%",style:{marginBottom:"10px"}}),Object(O.jsx)(L.a,{count:1,height:30,width:"80%"})]})})}):Object(O.jsx)(p.a,{children:t.map((function(e){return Object(O.jsx)(w.a,{xl:4,lg:4,md:4,sm:6,xs:6,children:Object(O.jsx)(y.a,{size:"lg",block:!0,style:{backgroundColor:"white",color:"#535353",marginBottom:"20px",width:"100%",height:"10vh",fontSize:"calc(10px + 1.2vw)",fontWeight:"bold",borderRadius:"10px"},id:e.properties.title,onClick:function(e){l(!0),h(e.target.id),x.a.post("/sheet/class",e.target.id)},children:e.properties.title})},e.properties.title)}))})]}),Object(O.jsxs)(E.a,{className:"text-center",size:"lg",show:i,onHide:function(){l(!1),S("")},children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:Object(O.jsx)("h3",{style:{fontWeight:"bold",color:"#535353"},children:u})})}),Object(O.jsxs)(E.a.Body,{children:[Object(O.jsxs)(p.a,{children:[Object(O.jsx)(w.a,{children:Object(O.jsx)(y.a,{xl:6,lg:6,md:6,sm:6,xs:6,style:{width:"100%",backgroundColor:"#3e4ccd",fontWeight:"bold"},onClick:function(){return S("Attendance")},children:"Attendance"})}),Object(O.jsx)(w.a,{xl:6,lg:6,md:6,sm:6,xs:6,children:Object(O.jsx)(y.a,{style:{width:"100%",backgroundColor:"#3e4ccd",fontWeight:"bold"},onClick:function(){return S("Student")},children:"Students"})})]}),Object(O.jsx)(p.a,{children:Object(O.jsxs)(w.a,{children:["Attendance"===g&&Object(O.jsx)(X,{setUpdateData:r}),"Student"===g&&Object(O.jsx)(G,{})]})})]})]})]})},$=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(o.a)(a,2),l=s[0],j=s[1],u=Object(c.useState)([]),h=Object(o.a)(u,2),b=h[0],f=h[1],g=Object(c.useState)([]),S=Object(o.a)(g,2),y=S[0],v=S[1],C=Object(c.useState)(!0),k=Object(o.a)(C,2),N=k[0],A=k[1],W=Object(c.useState)(!0),E=Object(o.a)(W,2),B=E[0],P=E[1];Object(c.useEffect)((function(){B&&I()}),[B]);var I=function(){var e=Object(d.a)(i.a.mark((function e(){var t,n,c,a,o,s,l,d,u,h,b,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],c=[],a=[],o=[],s=[],l=[],d=[],u=[],e.next=11,fetch("/drive/api");case 11:return e.next=13,fetch("/sheet/api").then((function(e){return e.json()})).then((function(e){t=e.sheets,e.sheets.forEach((function(e){n.push(e.properties.title)}))}));case 13:h=i.a.mark((function e(){var t,n,r,j,h,f,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O[b],n=[],e.next=4,x.a.post("/sheet/class",t);case 4:return e.next=6,fetch("/sheet/student").then((function(e){return e.json()})).then((function(e){c=e}));case 6:return e.next=8,fetch("/aws/api").then((function(e){return e.json()})).then((function(e){a=e}));case 8:a.sort((function(e,t){return new Date(t.Date)-new Date(e.Date)})),r=a.filter((function(e){return e.Date.includes(a[0].Date.split(" ")[0])})),a.length<1||void 0===a||(j=a[0].Date.split(" ")[0],h=c.length,f=0,c.forEach((function(e){r.forEach((function(t){e[0].includes(t.Name)&&(f+=1)})),n.push({Name:e[0],ID:e[1],Class:t})})),s.push({Class:t,Date:j,Present:f,Total_Students:h}),r.forEach((function(e){e.Temperature>=37.5&&l.push(e)})),a.forEach((function(e){o.push(e.Date.split(" ")[0])})),(o=Object(D.a)(new Set(o))).forEach((function(e){var t=[],c=[];0!==(t=a.filter((function(t){return t.Date.includes(e)}))).length&&(c=n.filter((function(e){var n=e.Name;return!t.some((function(e){return e.Name===n}))})),u=[].concat(Object(D.a)(u),Object(D.a)(c)))})),g=[],g=u.filter((function(e){return e.Class.includes(t)})),d=[].concat(Object(D.a)(d),Object(D.a)(g.reduce((function(e,t,n,c){return c.indexOf(t)!==n&&e.indexOf(t)<0&&e.push(t),e}),[]))));case 11:case"end":return e.stop()}}),e)})),b=0,O=n;case 15:if(!(b<O.length)){e.next=20;break}return e.delegateYield(h(),"t0",17);case 17:b++,e.next=15;break;case 20:r(t),j(s),f(l),v(d),A(!1),P(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T,{}),Object(O.jsxs)(m.a,{className:"text-center dashboard",fluid:!0,children:[Object(O.jsx)(p.a,{children:Object(O.jsx)(w.a,{children:Object(O.jsx)("h3",{style:{fontSize:"calc(22px + 2vw)",fontWeight:"bold",color:"#535353",textAlign:"left"},children:"Your Dashboard"})})}),Object(O.jsxs)(p.a,{children:[Object(O.jsxs)(w.a,{xl:6,lg:12,md:12,sm:12,xs:12,children:[Object(O.jsx)(p.a,{style:{marginBottom:"10px"},children:Object(O.jsx)(w.a,{xl:12,lg:12,md:12,sm:12,xs:12,children:Object(O.jsx)(V,{attendance:l,isLoading:N,setUpdateData:P})})}),Object(O.jsx)(p.a,{style:{marginBottom:"10px"},children:Object(O.jsx)(w.a,{xl:12,lg:12,md:12,sm:12,xs:12,children:Object(O.jsx)(Q,{temperatureMatter:b,lowAttendanceMatter:y,isLoading:N})})})]}),Object(O.jsx)(w.a,{xl:6,lg:12,md:12,sm:12,xs:12,style:{marginBottom:"10px"},children:Object(O.jsx)(Z,{classes:n,isLoading:N,setUpdateData:P})})]})]})]})},ee=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useContext)(f).getSession;return Object(c.useEffect)((function(){a().then((function(){setTimeout((function(){r(!0)}),1500)}))})),Object(O.jsx)(O.Fragment,{children:n?Object(O.jsx)($,{}):Object(O.jsx)(N,{})})},te=(n(764),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(O.jsx)(g,{children:Object(O.jsx)(ee,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ne(t,e)}))}}()}},[[765,1,2]]]);
//# sourceMappingURL=main.d267b895.chunk.js.map