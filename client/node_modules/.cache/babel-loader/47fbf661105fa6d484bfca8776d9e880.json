{"ast":null,"code":"import _slicedToArray from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{AccountContext}from\"./Account\";import{Form,Button,Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChangePassword=function ChangePassword(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newPassword=_useState4[0],setNewPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(AccountContext),getSession=_useContext.getSession,authenticate=_useContext.authenticate;var onSubmit=function onSubmit(event){setIsLoading(true);event.preventDefault();getSession().then(function(_ref){var user=_ref.user,email=_ref.email;authenticate(email,password).then(function(){user.changePassword(password,newPassword,function(err,result){if(err){setMessage(\"Wrong Password\");console.error(err);}else{console.log(result);}});});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Old Password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicPassword\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"New Password\",onChange:function onChange(event){return setNewPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\",marginBottom:\"10px\"},children:isLoading?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Change Password\"})}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"18px\",color:\"red\",textAlign:\"center\"},children:message})]})});};export default ChangePassword;","map":{"version":3,"sources":["C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/src/components/Authentication/ChangePassword.js"],"names":["React","useState","useContext","AccountContext","Form","Button","Spinner","ChangePassword","password","setPassword","newPassword","setNewPassword","isLoading","setIsLoading","message","setMessage","getSession","authenticate","onSubmit","event","preventDefault","then","user","email","changePassword","err","result","console","error","log","target","value","width","backgroundColor","fontSize","marginBottom","color","textAlign"],"mappings":"0QAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,cAAT,KAA+B,WAA/B,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,OAAvB,KAAsC,iBAAtC,C,6IAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,cAAgCN,QAAQ,CAAC,EAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAAsCR,QAAQ,CAAC,EAAD,CAA9C,yCAAOS,WAAP,eAAoBC,cAApB,eACA,eAAkCV,QAAQ,CAAC,KAAD,CAA1C,yCAAOW,SAAP,eAAkBC,YAAlB,eACA,eAA8BZ,QAAQ,CAAC,EAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eAEA,gBAAqCb,UAAU,CAACC,cAAD,CAA/C,CAAQa,UAAR,aAAQA,UAAR,CAAoBC,YAApB,aAAoBA,YAApB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1BN,YAAY,CAAC,IAAD,CAAZ,CACAM,KAAK,CAACC,cAAN,GAEAJ,UAAU,GAAGK,IAAb,CAAkB,cAAqB,IAAlBC,CAAAA,IAAkB,MAAlBA,IAAkB,CAAZC,KAAY,MAAZA,KAAY,CACrCN,YAAY,CAACM,KAAD,CAAQf,QAAR,CAAZ,CAA8Ba,IAA9B,CAAmC,UAAM,CACvCC,IAAI,CAACE,cAAL,CAAoBhB,QAApB,CAA8BE,WAA9B,CAA2C,SAACe,GAAD,CAAMC,MAAN,CAAiB,CAC1D,GAAID,GAAJ,CAAS,CACPV,UAAU,CAAC,gBAAD,CAAV,CACAY,OAAO,CAACC,KAAR,CAAcH,GAAd,EACD,CAHD,IAGO,CACLE,OAAO,CAACE,GAAR,CAAYH,MAAZ,EACD,CACF,CAPD,EAQD,CATD,EAUD,CAXD,EAYD,CAhBD,CAkBA,mBACE,sCACE,MAAC,IAAD,EAAM,QAAQ,CAAER,QAAhB,wBACE,KAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,gBAAtB,uBACE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,cAFd,CAGE,KAAK,CAAEV,QAHT,CAIE,QAAQ,CAAE,kBAACW,KAAD,QAAWV,CAAAA,WAAW,CAACU,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAtB,EAJZ,EADF,EADF,cAUE,KAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,mBAAtB,uBACE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,cAFd,CAGE,QAAQ,CAAE,kBAACZ,KAAD,QAAWR,CAAAA,cAAc,CAACQ,KAAK,CAACW,MAAN,CAAaC,KAAd,CAAzB,EAHZ,EADF,EAVF,cAkBE,KAAC,MAAD,EACE,OAAO,CAAC,SADV,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAE,CACLC,KAAK,CAAE,MADF,CAELC,eAAe,CAAE,SAFZ,CAGLC,QAAQ,CAAE,MAHL,CAILC,YAAY,CAAE,MAJT,CAHT,UAUGvB,SAAS,cACR,KAAC,OAAD,EACE,EAAE,CAAC,MADL,CAEE,SAAS,CAAC,QAFZ,CAGE,IAAI,CAAC,IAHP,CAIE,IAAI,CAAC,QAJP,CAKE,cAAY,MALd,EADQ,cASR,yCAnBJ,EAlBF,cAwCE,WACE,KAAK,CAAE,CACLsB,QAAQ,CAAE,MADL,CAELE,KAAK,CAAE,KAFF,CAGLC,SAAS,CAAE,QAHN,CADT,UAOGvB,OAPH,EAxCF,GADF,EADF,CAsDD,CAhFD,CAkFA,cAAeP,CAAAA,cAAf","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\nimport { Form, Button, Spinner } from \"react-bootstrap\";\r\n\r\nconst ChangePassword = () => {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const { getSession, authenticate } = useContext(AccountContext);\r\n\r\n  const onSubmit = (event) => {\r\n    setIsLoading(true);\r\n    event.preventDefault();\r\n\r\n    getSession().then(({ user, email }) => {\r\n      authenticate(email, password).then(() => {\r\n        user.changePassword(password, newPassword, (err, result) => {\r\n          if (err) {\r\n            setMessage(\"Wrong Password\");\r\n            console.error(err);\r\n          } else {\r\n            console.log(result);\r\n          }\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form onSubmit={onSubmit}>\r\n        <Form.Group controlId=\"formBasicEmail\">\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"Old Password\"\r\n            value={password}\r\n            onChange={(event) => setPassword(event.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"formBasicPassword\">\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"New Password\"\r\n            onChange={(event) => setNewPassword(event.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Button\r\n          variant=\"primary\"\r\n          type=\"submit\"\r\n          style={{\r\n            width: \"100%\",\r\n            backgroundColor: \"#3241c9\",\r\n            fontSize: \"22px\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          {isLoading ? (\r\n            <Spinner\r\n              as=\"span\"\r\n              animation=\"border\"\r\n              size=\"sm\"\r\n              role=\"status\"\r\n              aria-hidden=\"true\"\r\n            />\r\n          ) : (\r\n            <span>Change Password</span>\r\n          )}\r\n        </Button>\r\n        <h3\r\n          style={{\r\n            fontSize: \"18px\",\r\n            color: \"red\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          {message}\r\n        </h3>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n"]},"metadata":{},"sourceType":"module"}