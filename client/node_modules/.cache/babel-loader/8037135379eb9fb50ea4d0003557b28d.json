{"ast":null,"code":"import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Menu/menu';\nimport { css } from '@patternfly/react-styles';\nimport ExternalLinkAltIcon from \"@patternfly/react-icons/dist/esm/icons/external-link-alt-icon\";\nimport AngleRightIcon from \"@patternfly/react-icons/dist/esm/icons/angle-right-icon\";\nimport AngleLeftIcon from \"@patternfly/react-icons/dist/esm/icons/angle-left-icon\";\nimport CheckIcon from \"@patternfly/react-icons/dist/esm/icons/check-icon\";\nimport { MenuContext, MenuItemContext } from './MenuContext';\nimport { MenuItemAction } from './MenuItemAction';\n\nconst MenuItemBase = _a => {\n  var {\n    children,\n    className,\n    itemId = null,\n    to,\n    isActive = null,\n    isFavorited = null,\n    flyoutMenu,\n    direction,\n    description = null,\n    onClick = () => {},\n    component,\n    isDisabled = false,\n    isExternalLink = false,\n    isSelected = null,\n    icon,\n    actions,\n    onShowFlyout,\n    innerRef,\n    drilldownMenu,\n    isOnPath\n  } = _a,\n      props = __rest(_a, [\"children\", \"className\", \"itemId\", \"to\", \"isActive\", \"isFavorited\", \"flyoutMenu\", \"direction\", \"description\", \"onClick\", \"component\", \"isDisabled\", \"isExternalLink\", \"isSelected\", \"icon\", \"actions\", \"onShowFlyout\", \"innerRef\", \"drilldownMenu\", \"isOnPath\"]);\n\n  const Component = component || to ? 'a' : 'button';\n  const [flyoutVisible, setFlyoutVisible] = React.useState(false);\n  const [flyoutTarget, setFlyoutTarget] = React.useState(null);\n\n  const showFlyout = displayFlyout => {\n    setFlyoutVisible(displayFlyout);\n    onShowFlyout && displayFlyout && onShowFlyout();\n  };\n\n  React.useEffect(() => {\n    if (flyoutTarget) {\n      if (flyoutVisible) {\n        const flyoutMenu = flyoutTarget.nextElementSibling;\n        const flyoutItems = Array.from(flyoutMenu.getElementsByTagName('UL')[0].children).filter(el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider')));\n        flyoutItems[0].firstChild.focus();\n      } else {\n        flyoutTarget.focus();\n      }\n    }\n  }, [flyoutVisible, flyoutTarget]);\n\n  const handleFlyout = event => {\n    const key = event.key;\n    const target = event.target;\n\n    if (key === ' ' || key === 'Enter' || key === 'ArrowRight') {\n      event.stopPropagation();\n\n      if (!flyoutVisible) {\n        showFlyout(true);\n        setFlyoutTarget(target);\n      }\n    }\n\n    if (key === 'Escape' || key === 'ArrowLeft') {\n      event.stopPropagation();\n      showFlyout(false);\n    }\n  };\n\n  const onItemSelect = (event, onSelect) => {\n    // Trigger callback for Menu onSelect\n    onSelect && onSelect(event, itemId); // Trigger callback for item onClick\n\n    onClick && onClick(event);\n  };\n\n  const renderItem = (onSelect, activeItemId, selected, isOnPath, drill) => {\n    let additionalProps = {};\n\n    if (Component === 'a') {\n      additionalProps = {\n        href: to,\n        'aria-disabled': isDisabled ? true : null\n      };\n    } else if (Component === 'button') {\n      additionalProps = {\n        type: 'button'\n      };\n    }\n\n    if (isOnPath) {\n      additionalProps['aria-expanded'] = true;\n    }\n\n    const getAriaCurrent = () => {\n      if (isActive !== null) {\n        if (isActive) {\n          return 'page';\n        } else {\n          return null;\n        }\n      } else if (itemId !== null && activeItemId !== null) {\n        return itemId === activeItemId;\n      }\n\n      return null;\n    };\n\n    const getIsSelected = () => {\n      if (isSelected !== null) {\n        return isSelected;\n      } else if (selected !== null && itemId !== null) {\n        return Array.isArray(selected) && selected.includes(itemId) || itemId === selected;\n      }\n\n      return false;\n    };\n\n    return React.createElement(React.Fragment, null, React.createElement(Component, Object.assign({\n      onClick: event => {\n        onItemSelect(event, onSelect);\n        drill && drill();\n      },\n      className: css(styles.menuItem, getIsSelected() && styles.modifiers.selected, className),\n      \"aria-current\": getAriaCurrent(),\n      tabIndex: -1\n    }, isDisabled && {\n      disabled: true\n    }, additionalProps), React.createElement(\"span\", {\n      className: css(styles.menuItemMain)\n    }, direction === 'up' && React.createElement(\"span\", {\n      className: css(styles.menuItemToggleIcon)\n    }, React.createElement(AngleLeftIcon, {\n      \"aria-hidden\": true\n    })), icon && React.createElement(\"span\", {\n      className: css(styles.menuItemIcon)\n    }, icon), React.createElement(\"span\", {\n      className: css(styles.menuItemText)\n    }, children), isExternalLink && React.createElement(\"span\", {\n      className: css(styles.menuItemExternalIcon)\n    }, React.createElement(ExternalLinkAltIcon, {\n      \"aria-hidden\": true\n    })), (flyoutMenu || direction === 'down') && React.createElement(\"span\", {\n      className: css(styles.menuItemToggleIcon)\n    }, React.createElement(AngleRightIcon, {\n      \"aria-hidden\": true\n    })), getIsSelected() && React.createElement(\"span\", {\n      className: css(styles.menuItemSelectIcon)\n    }, React.createElement(CheckIcon, {\n      \"aria-hidden\": true\n    }))), description && direction !== 'up' && React.createElement(\"span\", {\n      className: css(styles.menuItemDescription)\n    }, React.createElement(\"span\", null, description))), flyoutVisible && flyoutMenu, drilldownMenu);\n  };\n\n  return React.createElement(MenuContext.Consumer, null, ({\n    menuId,\n    parentMenu,\n    onSelect,\n    onActionClick,\n    activeItemId,\n    selected,\n    drilldownItemPath,\n    onDrillIn,\n    onDrillOut\n  }) => {\n    const _isOnPath = isOnPath && isOnPath || drilldownItemPath && drilldownItemPath.includes(itemId) || false;\n\n    let _drill;\n\n    if (direction) {\n      if (direction === 'down') {\n        _drill = () => onDrillIn && onDrillIn(menuId, drilldownMenu.props.id, itemId);\n      } else {\n        _drill = () => onDrillOut && onDrillOut(parentMenu, itemId);\n      }\n    }\n\n    return React.createElement(\"li\", Object.assign({\n      className: css(styles.menuListItem, isDisabled && styles.modifiers.disabled, _isOnPath && styles.modifiers.currentPath, className),\n      onMouseOver: flyoutMenu !== undefined ? () => showFlyout(true) : undefined,\n      onMouseLeave: flyoutMenu !== undefined ? () => showFlyout(false) : undefined\n    }, flyoutMenu && {\n      onKeyDown: handleFlyout\n    }, {\n      tabIndex: -1,\n      ref: innerRef\n    }, props), renderItem(onSelect, activeItemId, selected, _isOnPath, _drill), React.createElement(MenuItemContext.Provider, {\n      value: {\n        itemId,\n        isDisabled\n      }\n    }, actions, isFavorited !== null && React.createElement(MenuItemAction, {\n      icon: \"favorites\",\n      isFavorited: isFavorited,\n      \"aria-label\": isFavorited ? 'starred' : 'not starred',\n      onClick: event => onActionClick(event, itemId),\n      tabIndex: -1,\n      actionId: \"fav\"\n    })));\n  });\n};\n\nexport const MenuItem = React.forwardRef((props, ref) => React.createElement(MenuItemBase, Object.assign({}, props, {\n  innerRef: ref\n})));\nMenuItem.displayName = 'MenuItem';","map":{"version":3,"sources":["../../../../src/components/Menu/MenuItem.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,MAAP,MAAmB,mDAAnB;AACA,SAAS,GAAT,QAAoB,0BAApB;AACA,OAAO,mBAAP,MAA0B,+DAA1B;AACA,OAAO,cAAP,MAAqB,yDAArB;AACA,OAAO,aAAP,MAAoB,wDAApB;AACA,OAAO,SAAP,MAAgB,mDAAhB;AACA,SAAS,WAAT,EAAsB,eAAtB,QAA6C,eAA7C;AACA,SAAS,cAAT,QAA+B,kBAA/B;;AA+CA,MAAM,YAAY,GAA4C,EAAD,IAsBzC;MAtB0C;AAC5D,IAAA,QAD4D;AAE5D,IAAA,SAF4D;AAG5D,IAAA,MAAM,GAAG,IAHmD;AAI5D,IAAA,EAJ4D;AAK5D,IAAA,QAAQ,GAAG,IALiD;AAM5D,IAAA,WAAW,GAAG,IAN8C;AAO5D,IAAA,UAP4D;AAQ5D,IAAA,SAR4D;AAS5D,IAAA,WAAW,GAAG,IAT8C;AAU5D,IAAA,OAAO,GAAG,MAAK,CAAG,CAV0C;AAW5D,IAAA,SAX4D;AAY5D,IAAA,UAAU,GAAG,KAZ+C;AAa5D,IAAA,cAAc,GAAG,KAb2C;AAc5D,IAAA,UAAU,GAAG,IAd+C;AAe5D,IAAA,IAf4D;AAgB5D,IAAA,OAhB4D;AAiB5D,IAAA,YAjB4D;AAkB5D,IAAA,QAlB4D;AAmB5D,IAAA,aAnB4D;AAoB5D,IAAA;AApB4D,MAoBpD,E;MACL,KAAK,GAAA,MAAA,CAAA,EAAA,EArBoD,CAAA,UAAA,EAAA,WAAA,EAAA,QAAA,EAAA,IAAA,EAAA,UAAA,EAAA,aAAA,EAAA,YAAA,EAAA,WAAA,EAAA,aAAA,EAAA,SAAA,EAAA,WAAA,EAAA,YAAA,EAAA,gBAAA,EAAA,YAAA,EAAA,MAAA,EAAA,SAAA,EAAA,cAAA,EAAA,UAAA,EAAA,eAAA,EAAA,UAAA,CAqBpD,C;;AAER,QAAM,SAAS,GAAG,SAAS,IAAI,EAAb,GAAkB,GAAlB,GAAwB,QAA1C;AACA,QAAM,CAAC,aAAD,EAAgB,gBAAhB,IAAoC,KAAK,CAAC,QAAN,CAAe,KAAf,CAA1C;AACA,QAAM,CAAC,YAAD,EAAe,eAAf,IAAkC,KAAK,CAAC,QAAN,CAAe,IAAf,CAAxC;;AAEA,QAAM,UAAU,GAAI,aAAD,IAA2B;AAC5C,IAAA,gBAAgB,CAAC,aAAD,CAAhB;AACA,IAAA,YAAY,IAAI,aAAhB,IAAiC,YAAY,EAA7C;AACD,GAHD;;AAKA,EAAA,KAAK,CAAC,SAAN,CAAgB,MAAK;AACnB,QAAI,YAAJ,EAAkB;AAChB,UAAI,aAAJ,EAAmB;AACjB,cAAM,UAAU,GAAI,YAA4B,CAAC,kBAAjD;AACA,cAAM,WAAW,GAAG,KAAK,CAAC,IAAN,CAAW,UAAU,CAAC,oBAAX,CAAgC,IAAhC,EAAsC,CAAtC,EAAyC,QAApD,EAA8D,MAA9D,CAClB,EAAE,IAAI,EAAE,EAAE,CAAC,SAAH,CAAa,QAAb,CAAsB,eAAtB,KAA0C,EAAE,CAAC,SAAH,CAAa,QAAb,CAAsB,cAAtB,CAA5C,CADY,CAApB;AAGC,QAAA,WAAW,CAAC,CAAD,CAAX,CAAe,UAAf,CAA0C,KAA1C;AACF,OAND,MAMO;AACL,QAAA,YAAY,CAAC,KAAb;AACD;AACF;AACF,GAZD,EAYG,CAAC,aAAD,EAAgB,YAAhB,CAZH;;AAcA,QAAM,YAAY,GAAI,KAAD,IAA+B;AAClD,UAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,MAArB;;AAEA,QAAI,GAAG,KAAK,GAAR,IAAe,GAAG,KAAK,OAAvB,IAAkC,GAAG,KAAK,YAA9C,EAA4D;AAC1D,MAAA,KAAK,CAAC,eAAN;;AACA,UAAI,CAAC,aAAL,EAAoB;AAClB,QAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAA,eAAe,CAAC,MAAD,CAAf;AACD;AACF;;AAED,QAAI,GAAG,KAAK,QAAR,IAAoB,GAAG,KAAK,WAAhC,EAA6C;AAC3C,MAAA,KAAK,CAAC,eAAN;AACA,MAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GAhBD;;AAkBA,QAAM,YAAY,GAAG,CAAC,KAAD,EAAa,QAAb,KAA8B;AACjD;AACA,IAAA,QAAQ,IAAI,QAAQ,CAAC,KAAD,EAAQ,MAAR,CAApB,CAFiD,CAGjD;;AACA,IAAA,OAAO,IAAI,OAAO,CAAC,KAAD,CAAlB;AACD,GALD;;AAOA,QAAM,UAAU,GAAG,CACjB,QADiB,EAEjB,YAFiB,EAGjB,QAHiB,EAIjB,QAJiB,EAKjB,KALiB,KAME;AACnB,QAAI,eAAe,GAAG,EAAtB;;AACA,QAAI,SAAS,KAAK,GAAlB,EAAuB;AACrB,MAAA,eAAe,GAAG;AAChB,QAAA,IAAI,EAAE,EADU;AAEhB,yBAAiB,UAAU,GAAG,IAAH,GAAU;AAFrB,OAAlB;AAID,KALD,MAKO,IAAI,SAAS,KAAK,QAAlB,EAA4B;AACjC,MAAA,eAAe,GAAG;AAChB,QAAA,IAAI,EAAE;AADU,OAAlB;AAGD;;AACD,QAAI,QAAJ,EAAc;AACX,MAAA,eAAuB,CAAC,eAAD,CAAvB,GAA2C,IAA3C;AACF;;AACD,UAAM,cAAc,GAAG,MAAK;AAC1B,UAAI,QAAQ,KAAK,IAAjB,EAAuB;AACrB,YAAI,QAAJ,EAAc;AACZ,iBAAO,MAAP;AACD,SAFD,MAEO;AACL,iBAAO,IAAP;AACD;AACF,OAND,MAMO,IAAI,MAAM,KAAK,IAAX,IAAmB,YAAY,KAAK,IAAxC,EAA8C;AACnD,eAAO,MAAM,KAAK,YAAlB;AACD;;AACD,aAAO,IAAP;AACD,KAXD;;AAYA,UAAM,aAAa,GAAG,MAAK;AACzB,UAAI,UAAU,KAAK,IAAnB,EAAyB;AACvB,eAAO,UAAP;AACD,OAFD,MAEO,IAAI,QAAQ,KAAK,IAAb,IAAqB,MAAM,KAAK,IAApC,EAA0C;AAC/C,eAAQ,KAAK,CAAC,OAAN,CAAc,QAAd,KAA2B,QAAQ,CAAC,QAAT,CAAkB,MAAlB,CAA5B,IAA0D,MAAM,KAAK,QAA5E;AACD;;AACD,aAAO,KAAP;AACD,KAPD;;AAQA,WACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU,MAAA,CAAA,MAAA,CAAA;AACR,MAAA,OAAO,EAAG,KAAD,IAAe;AACtB,QAAA,YAAY,CAAC,KAAD,EAAQ,QAAR,CAAZ;AACA,QAAA,KAAK,IAAI,KAAK,EAAd;AACD,OAJO;AAKR,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,QAAR,EAAkB,aAAa,MAAM,MAAM,CAAC,SAAP,CAAiB,QAAtD,EAAgE,SAAhE,CALN;AAKgF,sBAC1E,cAAc,EANpB;AAOR,MAAA,QAAQ,EAAE,CAAC;AAPH,KAAA,EAQH,UAAU,IAAI;AAAE,MAAA,QAAQ,EAAE;AAAZ,KARX,EASJ,eATI,CAAV,EAWE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,YAAR;AAApB,KAAA,EACG,SAAS,KAAK,IAAd,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,kBAAR;AAApB,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AAAA,qBAAA;AAAA,KAAd,CADF,CAFJ,EAMG,IAAI,IAAI,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,YAAR;AAApB,KAAA,EAA4C,IAA5C,CANX,EAOE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,YAAR;AAApB,KAAA,EAA4C,QAA5C,CAPF,EAQG,cAAc,IACb,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,oBAAR;AAApB,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,mBAAD,EAAoB;AAAA,qBAAA;AAAA,KAApB,CADF,CATJ,EAaG,CAAC,UAAU,IAAI,SAAS,KAAK,MAA7B,KACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,kBAAR;AAApB,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AAAA,qBAAA;AAAA,KAAf,CADF,CAdJ,EAkBG,aAAa,MACZ,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,kBAAR;AAApB,KAAA,EACE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU;AAAA,qBAAA;AAAA,KAAV,CADF,CAnBJ,CAXF,EAmCG,WAAW,IAAI,SAAS,KAAK,IAA7B,IACC,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM,MAAA,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,mBAAR;AAApB,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,EAAO,WAAP,CADF,CApCJ,CADF,EA0CG,aAAa,IAAI,UA1CpB,EA2CG,aA3CH,CADF;AA+CD,GAxFD;;AA0FA,SACE,KAAA,CAAA,aAAA,CAAC,WAAW,CAAC,QAAb,EAAqB,IAArB,EACG,CAAC;AACA,IAAA,MADA;AAEA,IAAA,UAFA;AAGA,IAAA,QAHA;AAIA,IAAA,aAJA;AAKA,IAAA,YALA;AAMA,IAAA,QANA;AAOA,IAAA,iBAPA;AAQA,IAAA,SARA;AASA,IAAA;AATA,GAAD,KAUI;AACH,UAAM,SAAS,GAAI,QAAQ,IAAI,QAAb,IAA2B,iBAAiB,IAAI,iBAAiB,CAAC,QAAlB,CAA2B,MAA3B,CAAhD,IAAuF,KAAzG;;AACA,QAAI,MAAJ;;AACA,QAAI,SAAJ,EAAe;AACb,UAAI,SAAS,KAAK,MAAlB,EAA0B;AACxB,QAAA,MAAM,GAAG,MAAM,SAAS,IAAI,SAAS,CAAC,MAAD,EAAU,aAAoC,CAAC,KAArC,CAA2C,EAArD,EAAyD,MAAzD,CAArC;AACD,OAFD,MAEO;AACL,QAAA,MAAM,GAAG,MAAM,UAAU,IAAI,UAAU,CAAC,UAAD,EAAa,MAAb,CAAvC;AACD;AACF;;AACD,WACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,MAAA,CAAA,MAAA,CAAA;AACE,MAAA,SAAS,EAAE,GAAG,CACZ,MAAM,CAAC,YADK,EAEZ,UAAU,IAAI,MAAM,CAAC,SAAP,CAAiB,QAFnB,EAGZ,SAAS,IAAI,MAAM,CAAC,SAAP,CAAiB,WAHlB,EAIZ,SAJY,CADhB;AAOE,MAAA,WAAW,EAAE,UAAU,KAAK,SAAf,GAA2B,MAAM,UAAU,CAAC,IAAD,CAA3C,GAAoD,SAPnE;AAQE,MAAA,YAAY,EAAE,UAAU,KAAK,SAAf,GAA2B,MAAM,UAAU,CAAC,KAAD,CAA3C,GAAqD;AARrE,KAAA,EASO,UAAU,IAAI;AAAE,MAAA,SAAS,EAAE;AAAb,KATrB,EASiD;AAC/C,MAAA,QAAQ,EAAE,CAAC,CADoC;AAE/C,MAAA,GAAG,EAAE;AAF0C,KATjD,EAYM,KAZN,CAAA,EAcG,UAAU,CAAC,QAAD,EAAW,YAAX,EAAyB,QAAzB,EAAmC,SAAnC,EAA8C,MAA9C,CAdb,EAeE,KAAA,CAAA,aAAA,CAAC,eAAe,CAAC,QAAjB,EAAyB;AAAC,MAAA,KAAK,EAAE;AAAE,QAAA,MAAF;AAAU,QAAA;AAAV;AAAR,KAAzB,EACG,OADH,EAEG,WAAW,KAAK,IAAhB,IACC,KAAA,CAAA,aAAA,CAAC,cAAD,EAAe;AACb,MAAA,IAAI,EAAC,WADQ;AAEb,MAAA,WAAW,EAAE,WAFA;AAEW,oBACZ,WAAW,GAAG,SAAH,GAAe,aAHzB;AAIb,MAAA,OAAO,EAAE,KAAK,IAAI,aAAa,CAAC,KAAD,EAAQ,MAAR,CAJlB;AAKb,MAAA,QAAQ,EAAE,CAAC,CALE;AAMb,MAAA,QAAQ,EAAC;AANI,KAAf,CAHJ,CAfF,CADF;AA+BD,GApDH,CADF;AAwDD,CAzND;;AA2NA,OAAO,MAAM,QAAQ,GAAG,KAAK,CAAC,UAAN,CAAiB,CAAC,KAAD,EAAuB,GAAvB,KACvC,KAAA,CAAA,aAAA,CAAC,YAAD,EAAa,MAAA,CAAA,MAAA,CAAA,EAAA,EAAK,KAAL,EAAU;AAAE,EAAA,QAAQ,EAAE;AAAZ,CAAV,CAAb,CADsB,CAAjB;AAGP,QAAQ,CAAC,WAAT,GAAuB,UAAvB","sourceRoot":"","sourcesContent":["import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Menu/menu';\nimport { css } from '@patternfly/react-styles';\nimport ExternalLinkAltIcon from \"@patternfly/react-icons/dist/esm/icons/external-link-alt-icon\";\nimport AngleRightIcon from \"@patternfly/react-icons/dist/esm/icons/angle-right-icon\";\nimport AngleLeftIcon from \"@patternfly/react-icons/dist/esm/icons/angle-left-icon\";\nimport CheckIcon from \"@patternfly/react-icons/dist/esm/icons/check-icon\";\nimport { MenuContext, MenuItemContext } from './MenuContext';\nimport { MenuItemAction } from './MenuItemAction';\nconst MenuItemBase = (_a) => {\n    var { children, className, itemId = null, to, isActive = null, isFavorited = null, flyoutMenu, direction, description = null, onClick = () => { }, component, isDisabled = false, isExternalLink = false, isSelected = null, icon, actions, onShowFlyout, innerRef, drilldownMenu, isOnPath } = _a, props = __rest(_a, [\"children\", \"className\", \"itemId\", \"to\", \"isActive\", \"isFavorited\", \"flyoutMenu\", \"direction\", \"description\", \"onClick\", \"component\", \"isDisabled\", \"isExternalLink\", \"isSelected\", \"icon\", \"actions\", \"onShowFlyout\", \"innerRef\", \"drilldownMenu\", \"isOnPath\"]);\n    const Component = component || to ? 'a' : 'button';\n    const [flyoutVisible, setFlyoutVisible] = React.useState(false);\n    const [flyoutTarget, setFlyoutTarget] = React.useState(null);\n    const showFlyout = (displayFlyout) => {\n        setFlyoutVisible(displayFlyout);\n        onShowFlyout && displayFlyout && onShowFlyout();\n    };\n    React.useEffect(() => {\n        if (flyoutTarget) {\n            if (flyoutVisible) {\n                const flyoutMenu = flyoutTarget.nextElementSibling;\n                const flyoutItems = Array.from(flyoutMenu.getElementsByTagName('UL')[0].children).filter(el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider')));\n                flyoutItems[0].firstChild.focus();\n            }\n            else {\n                flyoutTarget.focus();\n            }\n        }\n    }, [flyoutVisible, flyoutTarget]);\n    const handleFlyout = (event) => {\n        const key = event.key;\n        const target = event.target;\n        if (key === ' ' || key === 'Enter' || key === 'ArrowRight') {\n            event.stopPropagation();\n            if (!flyoutVisible) {\n                showFlyout(true);\n                setFlyoutTarget(target);\n            }\n        }\n        if (key === 'Escape' || key === 'ArrowLeft') {\n            event.stopPropagation();\n            showFlyout(false);\n        }\n    };\n    const onItemSelect = (event, onSelect) => {\n        // Trigger callback for Menu onSelect\n        onSelect && onSelect(event, itemId);\n        // Trigger callback for item onClick\n        onClick && onClick(event);\n    };\n    const renderItem = (onSelect, activeItemId, selected, isOnPath, drill) => {\n        let additionalProps = {};\n        if (Component === 'a') {\n            additionalProps = {\n                href: to,\n                'aria-disabled': isDisabled ? true : null\n            };\n        }\n        else if (Component === 'button') {\n            additionalProps = {\n                type: 'button'\n            };\n        }\n        if (isOnPath) {\n            additionalProps['aria-expanded'] = true;\n        }\n        const getAriaCurrent = () => {\n            if (isActive !== null) {\n                if (isActive) {\n                    return 'page';\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (itemId !== null && activeItemId !== null) {\n                return itemId === activeItemId;\n            }\n            return null;\n        };\n        const getIsSelected = () => {\n            if (isSelected !== null) {\n                return isSelected;\n            }\n            else if (selected !== null && itemId !== null) {\n                return (Array.isArray(selected) && selected.includes(itemId)) || itemId === selected;\n            }\n            return false;\n        };\n        return (React.createElement(React.Fragment, null,\n            React.createElement(Component, Object.assign({ onClick: (event) => {\n                    onItemSelect(event, onSelect);\n                    drill && drill();\n                }, className: css(styles.menuItem, getIsSelected() && styles.modifiers.selected, className), \"aria-current\": getAriaCurrent(), tabIndex: -1 }, (isDisabled && { disabled: true }), additionalProps),\n                React.createElement(\"span\", { className: css(styles.menuItemMain) },\n                    direction === 'up' && (React.createElement(\"span\", { className: css(styles.menuItemToggleIcon) },\n                        React.createElement(AngleLeftIcon, { \"aria-hidden\": true }))),\n                    icon && React.createElement(\"span\", { className: css(styles.menuItemIcon) }, icon),\n                    React.createElement(\"span\", { className: css(styles.menuItemText) }, children),\n                    isExternalLink && (React.createElement(\"span\", { className: css(styles.menuItemExternalIcon) },\n                        React.createElement(ExternalLinkAltIcon, { \"aria-hidden\": true }))),\n                    (flyoutMenu || direction === 'down') && (React.createElement(\"span\", { className: css(styles.menuItemToggleIcon) },\n                        React.createElement(AngleRightIcon, { \"aria-hidden\": true }))),\n                    getIsSelected() && (React.createElement(\"span\", { className: css(styles.menuItemSelectIcon) },\n                        React.createElement(CheckIcon, { \"aria-hidden\": true })))),\n                description && direction !== 'up' && (React.createElement(\"span\", { className: css(styles.menuItemDescription) },\n                    React.createElement(\"span\", null, description)))),\n            flyoutVisible && flyoutMenu,\n            drilldownMenu));\n    };\n    return (React.createElement(MenuContext.Consumer, null, ({ menuId, parentMenu, onSelect, onActionClick, activeItemId, selected, drilldownItemPath, onDrillIn, onDrillOut }) => {\n        const _isOnPath = (isOnPath && isOnPath) || (drilldownItemPath && drilldownItemPath.includes(itemId)) || false;\n        let _drill;\n        if (direction) {\n            if (direction === 'down') {\n                _drill = () => onDrillIn && onDrillIn(menuId, drilldownMenu.props.id, itemId);\n            }\n            else {\n                _drill = () => onDrillOut && onDrillOut(parentMenu, itemId);\n            }\n        }\n        return (React.createElement(\"li\", Object.assign({ className: css(styles.menuListItem, isDisabled && styles.modifiers.disabled, _isOnPath && styles.modifiers.currentPath, className), onMouseOver: flyoutMenu !== undefined ? () => showFlyout(true) : undefined, onMouseLeave: flyoutMenu !== undefined ? () => showFlyout(false) : undefined }, (flyoutMenu && { onKeyDown: handleFlyout }), { tabIndex: -1, ref: innerRef }, props),\n            renderItem(onSelect, activeItemId, selected, _isOnPath, _drill),\n            React.createElement(MenuItemContext.Provider, { value: { itemId, isDisabled } },\n                actions,\n                isFavorited !== null && (React.createElement(MenuItemAction, { icon: \"favorites\", isFavorited: isFavorited, \"aria-label\": isFavorited ? 'starred' : 'not starred', onClick: event => onActionClick(event, itemId), tabIndex: -1, actionId: \"fav\" })))));\n    }));\n};\nexport const MenuItem = React.forwardRef((props, ref) => (React.createElement(MenuItemBase, Object.assign({}, props, { innerRef: ref }))));\nMenuItem.displayName = 'MenuItem';\n//# sourceMappingURL=MenuItem.js.map"]},"metadata":{},"sourceType":"module"}