{"ast":null,"code":"import { __rest } from \"tslib\";\n/* eslint-disable no-console */\n\nimport * as React from 'react';\nimport { KEY_CODES } from '../../helpers/constants';\nimport styles from '@patternfly/react-styles/css/components/Popover/popover';\nimport { css } from '@patternfly/react-styles';\nimport { PopoverContent } from './PopoverContent';\nimport { PopoverBody } from './PopoverBody';\nimport { PopoverHeader } from './PopoverHeader';\nimport { PopoverFooter } from './PopoverFooter';\nimport { PopoverCloseButton } from './PopoverCloseButton';\nimport { PopoverArrow } from './PopoverArrow';\nimport popoverMaxWidth from \"@patternfly/react-tokens/dist/esm/c_popover_MaxWidth\";\nimport popoverMinWidth from \"@patternfly/react-tokens/dist/esm/c_popover_MinWidth\";\nimport { FocusTrap } from '../../helpers';\nimport { Popper, getOpacityTransition } from '../../helpers/Popper/Popper';\nimport { getUniqueId } from '../../helpers/util';\nexport var PopoverPosition;\n\n(function (PopoverPosition) {\n  PopoverPosition[\"auto\"] = \"auto\";\n  PopoverPosition[\"top\"] = \"top\";\n  PopoverPosition[\"bottom\"] = \"bottom\";\n  PopoverPosition[\"left\"] = \"left\";\n  PopoverPosition[\"right\"] = \"right\";\n})(PopoverPosition || (PopoverPosition = {}));\n\nexport const Popover = _a => {\n  var {\n    children,\n    position = 'top',\n    enableFlip = true,\n    className = '',\n    isVisible = null,\n    shouldClose = () => null,\n    shouldOpen = () => null,\n    'aria-label': ariaLabel = '',\n    bodyContent,\n    headerContent = null,\n    footerContent = null,\n    appendTo = () => document.body,\n    hideOnOutsideClick = true,\n    onHide = () => null,\n    onHidden = () => null,\n    onShow = () => null,\n    onShown = () => null,\n    onMount = () => null,\n    zIndex = 9999,\n    minWidth = popoverMinWidth && popoverMinWidth.value,\n    maxWidth = popoverMaxWidth && popoverMaxWidth.value,\n    closeBtnAriaLabel = 'Close',\n    showClose = true,\n    distance = 25,\n    // For every initial starting position, there are 3 escape positions\n    flipBehavior = ['top', 'right', 'bottom', 'left', 'top', 'right', 'bottom'],\n    animationDuration = 300,\n    id,\n    withFocusTrap: propWithFocusTrap,\n    boundary,\n    tippyProps,\n    reference,\n    hasNoPadding = false,\n    hasAutoWidth = false\n  } = _a,\n      rest = __rest(_a, [\"children\", \"position\", \"enableFlip\", \"className\", \"isVisible\", \"shouldClose\", \"shouldOpen\", 'aria-label', \"bodyContent\", \"headerContent\", \"footerContent\", \"appendTo\", \"hideOnOutsideClick\", \"onHide\", \"onHidden\", \"onShow\", \"onShown\", \"onMount\", \"zIndex\", \"minWidth\", \"maxWidth\", \"closeBtnAriaLabel\", \"showClose\", \"distance\", \"flipBehavior\", \"animationDuration\", \"id\", \"withFocusTrap\", \"boundary\", \"tippyProps\", \"reference\", \"hasNoPadding\", \"hasAutoWidth\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    boundary !== undefined && console.warn('The Popover boundary prop has been deprecated. If you want to constrain the popper to a specific element use the appendTo prop instead.');\n    tippyProps !== undefined && console.warn('The Popover tippyProps prop has been deprecated and is no longer used.');\n  } // could make this a prop in the future (true | false | 'toggle')\n  // const hideOnClick = true;\n\n\n  const uniqueId = id || getUniqueId();\n  const triggerManually = isVisible !== null;\n  const [visible, setVisible] = React.useState(false);\n  const [opacity, setOpacity] = React.useState(0);\n  const [focusTrapActive, setFocusTrapActive] = React.useState(Boolean(propWithFocusTrap));\n  const transitionTimerRef = React.useRef(null);\n  const showTimerRef = React.useRef(null);\n  const hideTimerRef = React.useRef(null);\n  React.useEffect(() => {\n    onMount();\n  }, []);\n  React.useEffect(() => {\n    if (triggerManually) {\n      if (isVisible) {\n        show();\n      } else {\n        hide();\n      }\n    }\n  }, [isVisible, triggerManually]);\n\n  const show = withFocusTrap => {\n    onShow();\n\n    if (transitionTimerRef.current) {\n      clearTimeout(transitionTimerRef.current);\n    }\n\n    if (hideTimerRef.current) {\n      clearTimeout(hideTimerRef.current);\n    }\n\n    showTimerRef.current = setTimeout(() => {\n      setVisible(true);\n      setOpacity(1);\n      propWithFocusTrap !== false && withFocusTrap && setFocusTrapActive(true);\n      onShown();\n    }, 0);\n  };\n\n  const hide = () => {\n    onHide();\n\n    if (showTimerRef.current) {\n      clearTimeout(showTimerRef.current);\n    }\n\n    hideTimerRef.current = setTimeout(() => {\n      setOpacity(0);\n      setFocusTrapActive(false);\n      transitionTimerRef.current = setTimeout(() => {\n        setVisible(false);\n        onHidden();\n      }, animationDuration);\n    }, 0);\n  };\n\n  const positionModifiers = {\n    top: styles.modifiers.top,\n    bottom: styles.modifiers.bottom,\n    left: styles.modifiers.left,\n    right: styles.modifiers.right\n  };\n  const hasCustomMinWidth = minWidth !== popoverMinWidth.value;\n  const hasCustomMaxWidth = maxWidth !== popoverMaxWidth.value;\n\n  const onDocumentKeyDown = event => {\n    if (event.keyCode === KEY_CODES.ESCAPE_KEY && visible) {\n      if (triggerManually) {\n        shouldClose(null, hide, event);\n      } else {\n        hide();\n      }\n    }\n  };\n\n  const onDocumentClick = (event, triggerElement, popperElement) => {\n    if (hideOnOutsideClick && visible) {\n      // check if we clicked within the popper, if so don't do anything\n      const isChild = popperElement && popperElement.contains(event.target);\n\n      if (isChild) {\n        // clicked within the popper\n        return;\n      }\n\n      if (triggerManually) {\n        shouldClose(null, hide, event);\n      } else {\n        hide();\n      }\n    }\n  };\n\n  const onTriggerEnter = event => {\n    if (event.keyCode === KEY_CODES.ENTER) {\n      if (!visible) {\n        if (triggerManually) {\n          shouldOpen(show, event);\n        } else {\n          show(true);\n        }\n      } else {\n        if (triggerManually) {\n          shouldClose(null, hide, event);\n        } else {\n          hide();\n        }\n      }\n    }\n  };\n\n  const onTriggerClick = event => {\n    if (triggerManually) {\n      if (visible) {\n        shouldClose(null, hide, event);\n      } else {\n        shouldOpen(show, event);\n      }\n    } else {\n      if (visible) {\n        hide();\n      } else {\n        show();\n      }\n    }\n  };\n\n  const onContentMouseDown = () => {\n    if (focusTrapActive) {\n      setFocusTrapActive(false);\n    }\n  };\n\n  const closePopover = event => {\n    event.stopPropagation();\n\n    if (triggerManually) {\n      shouldClose(null, hide, event);\n    } else {\n      hide();\n    }\n  };\n\n  const content = React.createElement(FocusTrap, Object.assign({\n    active: focusTrapActive,\n    focusTrapOptions: {\n      returnFocusOnDeactivate: true,\n      clickOutsideDeactivates: true,\n      fallbackFocus: () => {\n        // If the popover's trigger is focused but scrolled out of view,\n        // FocusTrap will throw an error when the Enter button is used on the trigger.\n        // That is because the Popover is hidden when its trigger is out of view.\n        // Provide a fallback in that case.\n        let node = null;\n\n        if (document && document.activeElement) {\n          node = document.activeElement;\n        }\n\n        return node;\n      }\n    },\n    preventScrollOnDeactivate: true,\n    className: css(styles.popover, hasNoPadding && styles.modifiers.noPadding, hasAutoWidth && styles.modifiers.widthAuto, className),\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    \"aria-label\": headerContent ? undefined : ariaLabel,\n    \"aria-labelledby\": headerContent ? `popover-${uniqueId}-header` : undefined,\n    \"aria-describedby\": `popover-${uniqueId}-body`,\n    onMouseDown: onContentMouseDown,\n    style: {\n      minWidth: hasCustomMinWidth ? minWidth : null,\n      maxWidth: hasCustomMaxWidth ? maxWidth : null,\n      opacity,\n      transition: getOpacityTransition(animationDuration)\n    }\n  }, rest), React.createElement(PopoverArrow, null), React.createElement(PopoverContent, null, showClose && React.createElement(PopoverCloseButton, {\n    onClose: closePopover,\n    \"aria-label\": closeBtnAriaLabel\n  }), headerContent && React.createElement(PopoverHeader, {\n    id: `popover-${uniqueId}-header`\n  }, typeof headerContent === 'function' ? headerContent(hide) : headerContent), React.createElement(PopoverBody, {\n    id: `popover-${uniqueId}-body`\n  }, typeof bodyContent === 'function' ? bodyContent(hide) : bodyContent), footerContent && React.createElement(PopoverFooter, {\n    id: `popover-${uniqueId}-footer`\n  }, typeof footerContent === 'function' ? footerContent(hide) : footerContent)));\n  return React.createElement(Popper, {\n    trigger: children,\n    reference: reference,\n    popper: content,\n    popperMatchesTriggerWidth: false,\n    appendTo: appendTo,\n    isVisible: visible,\n    positionModifiers: positionModifiers,\n    distance: distance,\n    placement: position,\n    onTriggerClick: onTriggerClick,\n    onTriggerEnter: onTriggerEnter,\n    onDocumentClick: onDocumentClick,\n    onDocumentKeyDown: onDocumentKeyDown,\n    enableFlip: enableFlip,\n    zIndex: zIndex,\n    flipBehavior: flipBehavior\n  });\n};\nPopover.displayName = 'Popover';","map":{"version":3,"sources":["../../../../src/components/Popover/Popover.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __rest } from \"tslib\";\n/* eslint-disable no-console */\nimport * as React from 'react';\nimport { KEY_CODES } from '../../helpers/constants';\nimport styles from '@patternfly/react-styles/css/components/Popover/popover';\nimport { css } from '@patternfly/react-styles';\nimport { PopoverContent } from './PopoverContent';\nimport { PopoverBody } from './PopoverBody';\nimport { PopoverHeader } from './PopoverHeader';\nimport { PopoverFooter } from './PopoverFooter';\nimport { PopoverCloseButton } from './PopoverCloseButton';\nimport { PopoverArrow } from './PopoverArrow';\nimport popoverMaxWidth from \"@patternfly/react-tokens/dist/esm/c_popover_MaxWidth\";\nimport popoverMinWidth from \"@patternfly/react-tokens/dist/esm/c_popover_MinWidth\";\nimport { FocusTrap } from '../../helpers';\nimport { Popper, getOpacityTransition } from '../../helpers/Popper/Popper';\nimport { getUniqueId } from '../../helpers/util';\nexport var PopoverPosition;\n(function (PopoverPosition) {\n    PopoverPosition[\"auto\"] = \"auto\";\n    PopoverPosition[\"top\"] = \"top\";\n    PopoverPosition[\"bottom\"] = \"bottom\";\n    PopoverPosition[\"left\"] = \"left\";\n    PopoverPosition[\"right\"] = \"right\";\n})(PopoverPosition || (PopoverPosition = {}));\nexport const Popover = (_a) => {\n    var { children, position = 'top', enableFlip = true, className = '', isVisible = null, shouldClose = () => null, shouldOpen = () => null, 'aria-label': ariaLabel = '', bodyContent, headerContent = null, footerContent = null, appendTo = () => document.body, hideOnOutsideClick = true, onHide = () => null, onHidden = () => null, onShow = () => null, onShown = () => null, onMount = () => null, zIndex = 9999, minWidth = popoverMinWidth && popoverMinWidth.value, maxWidth = popoverMaxWidth && popoverMaxWidth.value, closeBtnAriaLabel = 'Close', showClose = true, distance = 25, \n    // For every initial starting position, there are 3 escape positions\n    flipBehavior = ['top', 'right', 'bottom', 'left', 'top', 'right', 'bottom'], animationDuration = 300, id, withFocusTrap: propWithFocusTrap, boundary, tippyProps, reference, hasNoPadding = false, hasAutoWidth = false } = _a, rest = __rest(_a, [\"children\", \"position\", \"enableFlip\", \"className\", \"isVisible\", \"shouldClose\", \"shouldOpen\", 'aria-label', \"bodyContent\", \"headerContent\", \"footerContent\", \"appendTo\", \"hideOnOutsideClick\", \"onHide\", \"onHidden\", \"onShow\", \"onShown\", \"onMount\", \"zIndex\", \"minWidth\", \"maxWidth\", \"closeBtnAriaLabel\", \"showClose\", \"distance\", \"flipBehavior\", \"animationDuration\", \"id\", \"withFocusTrap\", \"boundary\", \"tippyProps\", \"reference\", \"hasNoPadding\", \"hasAutoWidth\"]);\n    if (process.env.NODE_ENV !== 'production') {\n        boundary !== undefined &&\n            console.warn('The Popover boundary prop has been deprecated. If you want to constrain the popper to a specific element use the appendTo prop instead.');\n        tippyProps !== undefined && console.warn('The Popover tippyProps prop has been deprecated and is no longer used.');\n    }\n    // could make this a prop in the future (true | false | 'toggle')\n    // const hideOnClick = true;\n    const uniqueId = id || getUniqueId();\n    const triggerManually = isVisible !== null;\n    const [visible, setVisible] = React.useState(false);\n    const [opacity, setOpacity] = React.useState(0);\n    const [focusTrapActive, setFocusTrapActive] = React.useState(Boolean(propWithFocusTrap));\n    const transitionTimerRef = React.useRef(null);\n    const showTimerRef = React.useRef(null);\n    const hideTimerRef = React.useRef(null);\n    React.useEffect(() => {\n        onMount();\n    }, []);\n    React.useEffect(() => {\n        if (triggerManually) {\n            if (isVisible) {\n                show();\n            }\n            else {\n                hide();\n            }\n        }\n    }, [isVisible, triggerManually]);\n    const show = (withFocusTrap) => {\n        onShow();\n        if (transitionTimerRef.current) {\n            clearTimeout(transitionTimerRef.current);\n        }\n        if (hideTimerRef.current) {\n            clearTimeout(hideTimerRef.current);\n        }\n        showTimerRef.current = setTimeout(() => {\n            setVisible(true);\n            setOpacity(1);\n            propWithFocusTrap !== false && withFocusTrap && setFocusTrapActive(true);\n            onShown();\n        }, 0);\n    };\n    const hide = () => {\n        onHide();\n        if (showTimerRef.current) {\n            clearTimeout(showTimerRef.current);\n        }\n        hideTimerRef.current = setTimeout(() => {\n            setOpacity(0);\n            setFocusTrapActive(false);\n            transitionTimerRef.current = setTimeout(() => {\n                setVisible(false);\n                onHidden();\n            }, animationDuration);\n        }, 0);\n    };\n    const positionModifiers = {\n        top: styles.modifiers.top,\n        bottom: styles.modifiers.bottom,\n        left: styles.modifiers.left,\n        right: styles.modifiers.right\n    };\n    const hasCustomMinWidth = minWidth !== popoverMinWidth.value;\n    const hasCustomMaxWidth = maxWidth !== popoverMaxWidth.value;\n    const onDocumentKeyDown = (event) => {\n        if (event.keyCode === KEY_CODES.ESCAPE_KEY && visible) {\n            if (triggerManually) {\n                shouldClose(null, hide, event);\n            }\n            else {\n                hide();\n            }\n        }\n    };\n    const onDocumentClick = (event, triggerElement, popperElement) => {\n        if (hideOnOutsideClick && visible) {\n            // check if we clicked within the popper, if so don't do anything\n            const isChild = popperElement && popperElement.contains(event.target);\n            if (isChild) {\n                // clicked within the popper\n                return;\n            }\n            if (triggerManually) {\n                shouldClose(null, hide, event);\n            }\n            else {\n                hide();\n            }\n        }\n    };\n    const onTriggerEnter = (event) => {\n        if (event.keyCode === KEY_CODES.ENTER) {\n            if (!visible) {\n                if (triggerManually) {\n                    shouldOpen(show, event);\n                }\n                else {\n                    show(true);\n                }\n            }\n            else {\n                if (triggerManually) {\n                    shouldClose(null, hide, event);\n                }\n                else {\n                    hide();\n                }\n            }\n        }\n    };\n    const onTriggerClick = (event) => {\n        if (triggerManually) {\n            if (visible) {\n                shouldClose(null, hide, event);\n            }\n            else {\n                shouldOpen(show, event);\n            }\n        }\n        else {\n            if (visible) {\n                hide();\n            }\n            else {\n                show();\n            }\n        }\n    };\n    const onContentMouseDown = () => {\n        if (focusTrapActive) {\n            setFocusTrapActive(false);\n        }\n    };\n    const closePopover = (event) => {\n        event.stopPropagation();\n        if (triggerManually) {\n            shouldClose(null, hide, event);\n        }\n        else {\n            hide();\n        }\n    };\n    const content = (React.createElement(FocusTrap, Object.assign({ active: focusTrapActive, focusTrapOptions: {\n            returnFocusOnDeactivate: true,\n            clickOutsideDeactivates: true,\n            fallbackFocus: () => {\n                // If the popover's trigger is focused but scrolled out of view,\n                // FocusTrap will throw an error when the Enter button is used on the trigger.\n                // That is because the Popover is hidden when its trigger is out of view.\n                // Provide a fallback in that case.\n                let node = null;\n                if (document && document.activeElement) {\n                    node = document.activeElement;\n                }\n                return node;\n            }\n        }, preventScrollOnDeactivate: true, className: css(styles.popover, hasNoPadding && styles.modifiers.noPadding, hasAutoWidth && styles.modifiers.widthAuto, className), role: \"dialog\", \"aria-modal\": \"true\", \"aria-label\": headerContent ? undefined : ariaLabel, \"aria-labelledby\": headerContent ? `popover-${uniqueId}-header` : undefined, \"aria-describedby\": `popover-${uniqueId}-body`, onMouseDown: onContentMouseDown, style: {\n            minWidth: hasCustomMinWidth ? minWidth : null,\n            maxWidth: hasCustomMaxWidth ? maxWidth : null,\n            opacity,\n            transition: getOpacityTransition(animationDuration)\n        } }, rest),\n        React.createElement(PopoverArrow, null),\n        React.createElement(PopoverContent, null,\n            showClose && React.createElement(PopoverCloseButton, { onClose: closePopover, \"aria-label\": closeBtnAriaLabel }),\n            headerContent && (React.createElement(PopoverHeader, { id: `popover-${uniqueId}-header` }, typeof headerContent === 'function' ? headerContent(hide) : headerContent)),\n            React.createElement(PopoverBody, { id: `popover-${uniqueId}-body` }, typeof bodyContent === 'function' ? bodyContent(hide) : bodyContent),\n            footerContent && (React.createElement(PopoverFooter, { id: `popover-${uniqueId}-footer` }, typeof footerContent === 'function' ? footerContent(hide) : footerContent)))));\n    return (React.createElement(Popper, { trigger: children, reference: reference, popper: content, popperMatchesTriggerWidth: false, appendTo: appendTo, isVisible: visible, positionModifiers: positionModifiers, distance: distance, placement: position, onTriggerClick: onTriggerClick, onTriggerEnter: onTriggerEnter, onDocumentClick: onDocumentClick, onDocumentKeyDown: onDocumentKeyDown, enableFlip: enableFlip, zIndex: zIndex, flipBehavior: flipBehavior }));\n};\nPopover.displayName = 'Popover';\n//# sourceMappingURL=Popover.js.map"]},"metadata":{},"sourceType":"module"}