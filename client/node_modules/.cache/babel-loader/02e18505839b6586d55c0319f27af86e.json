{"ast":null,"code":"var _jsxFileName = \"C:\\\\School Stuff\\\\Modules\\\\2021 Sem One\\\\Final Year Project\\\\Temperature Monitoring And Attendance Taking System\\\\Web Interface Prototype\\\\raspitar\\\\src\\\\components\\\\Dashboard\\\\test.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { AccountContext } from \"../Authentication/Account\";\nimport gapi from \"gapi-client\";\nimport { KEYUTIL, KJUR } from \"jsrsasign\";\nimport \"jsrsasign-util\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Test = () => {\n  _s();\n\n  const {\n    userEmail\n  } = useContext(AccountContext);\n  const [classMetaData, setClassMetaData] = useState([]);\n  const [classArray, setClassArray] = useState([]);\n  const [sheetID, setSheetID] = useState(\"\");\n\n  const postJWT = (jwt, callback) => {\n    var xhttp = new XMLHttpRequest();\n\n    xhttp.onreadystatechange = function () {\n      if (this.readyState == 4) {\n        if (this.status == 200 && callback) {\n          callback(this.responseText);\n          return;\n        }\n\n        if (console) console.log(this.responseText[access_token]);\n      }\n    };\n\n    var parameters = \"grant_type=\" + encodeURIComponent(\"urn:ietf:params:oauth:grant-type:jwt-bearer\") + \"&assertion=\" + encodeURIComponent(jwt);\n    xhttp.open(\"POST\", \"https://www.googleapis.com/oauth2/v4/token\", true);\n    xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhttp.send(parameters);\n  };\n\n  const getCert = () => {\n    var cert = //your json key (downloaded earlier) goes here\n    {\n      type: \"service_account\",\n      project_id: \"raspitar-308103\",\n      private_key_id: \"164e561ec656424d08ccf096df4590d5d2e94c5d\",\n      private_key: \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC3TcW7jZysBZjK\\n2MHNGAmBZKJ2Ch+PNTwW98u7b3M5eRm0eInlUEVz+0/pzKA2BrUXoqIiW8CAiZCT\\nvLW1gMBndodIUgZZS9t0hyKpj33IYh77vD14oaZCyCQxV6hBRRaStiaoBHdCiHzi\\nzOP+AMuFmSQnp90VYZLQ2dNaoQINbsVnGtxtsowyjRFvxV/Gu0C1nS1kneEZsXqZ\\nWJGDGDSVbtM0ZZmOy23UGzelWfoY1ltrJ2R5Im9PhMNcI5Rq51DOsO5QM6ksdhX4\\nBDYUa7eSl2Dt6LGvf0zK1wGdHLHX8M3WfurS3hMdIprRGvWHeVYrusgduic4vjBB\\nKUHktoihAgMBAAECggEAAP+edSAXW2SIaYp2u8xGuPq4W9ZAR8Jtel6NMI8x3H1J\\nY49IiQQ/7JrQ26AuuzycHe3X3kILsWeObw+XGc8CvU2K/RzdRf1Ay8i0qqHKeJ34\\nNzzWROL0ieaXM+GbXAepUNFHMqEbmTQvIfklwMt2UFr+NG0YqjYm25ZkLVk1LqeK\\ndM95jE6Dpc0zx/DOGhC9vXNZFW5JWNOOQVIuklXGYRPI71sa55PfxSK//LMbm1y4\\nqMzBG+pwtQLA/P+x5jAdhUTdyoz78cCsj/20Uzv26+TiVBIX+B4Qm0DPKryLBaVm\\nY8gnWLi+mJ+mbGF49x63JD5tcazhK54fswoRE7WS5QKBgQDjvL5u223kkc6MOjbj\\nJcDKmxTZoZ1EcFQsHB25Pgv5zeD6EplLjQSvL202S4AUsrSgXRXumrXmQ7UVRbi+\\nrPAG2UA4davhGBcXTq3mNQibIxlfrJj73A1Gv/dxtMeNG5J0vONBFz+Dpxb3uY58\\nYa3GUp4Syv1byjESRiHklojfiwKBgQDODV5Seo9DufMqwPfePtmdZ+ovWVM8fbEl\\ntCHS4R/LvK4buFuJCRsckxjDW+8wWyPd0YlHfqhS8PLRZvVOS/BTuO1wttZOXRIK\\nYADAf86P/OXSrUnx6O7+pL+1hZUjKn9O7jFxLCL+WHfiLGs9NF2o+bCm6GBmruDJ\\n9uTcY/D+AwKBgQC3SEfa4C5pLg+VO6TA2rl2ValKHY98bQrRFS+2zgDFYrQVjrJg\\n43VJqFm0wL6r6ccE6OWlyk1qrEMog5xTmMr0OBQ/XDSgS8sJrwC1rSjn8i+RmE7n\\nJAprTkPO9zdCkVYlLX+X+yXaxrbtWCEcaWB5pDQj28pb/TXRBzBvz9cIUQKBgGqP\\nxVj4Y0EOWLCirU21yUs7Y4RrOL3O7x9lohxyKsRt5skVNdmP6QKFHEhkMjYa3Fiq\\nNcnQufJzA9DB41lDsp1JxRoGpJxQS7Ur4xeqwUP78UtcLSK7aWYuA6s302IlZ0OF\\nsfIqdkp9rDo+6JL1kv6BaxdWlAxmooAwfDlyQj7LAoGBAKerxJuF9hn3uhjhUQC6\\nXS1ttKCiEmps392JckerTc7sRXWVzGRxo3d+b73We2H2JrYtmd7f16fw5nYfLMLV\\nNMqhZ0hv1kxFTj/22yDu1FHx3rTgGEwmAUIl6uDFc+8mqIdGg5GEVonPJHq+yW9f\\n7SRwj7JJL2Dugiz8wv1JHo9t\\n-----END PRIVATE KEY-----\\n\",\n      client_email: \"raspitar@raspitar-308103.iam.gserviceaccount.com\",\n      client_id: \"115460138632126755033\",\n      auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\n      token_uri: \"https://oauth2.googleapis.com/token\",\n      auth_provider_x509_cert_url: \"https://www.googleapis.com/oauth2/v1/certs\",\n      client_x509_cert_url: \"https://www.googleapis.com/robot/v1/metadata/x509/raspitar%40raspitar-308103.iam.gserviceaccount.com\"\n    };\n    return cert;\n  };\n\n  const getJWT = () => {\n    var cert = getCert();\n    var key = KEYUTIL.getKey(cert.private_key);\n    var headers = {\n      alg: \"RS256\",\n      typ: \"JWT\"\n    };\n    var issued = Math.floor(new Date().getTime() / 1000);\n    var claims = {\n      iss: cert.client_email,\n      scope: \"https://www.googleapis.com/auth/analytics.readonly\",\n      aud: \"https://www.googleapis.com/oauth2/v4/token\",\n      exp: issued + 3600,\n      iat: issued\n    };\n    var jwt = KJUR.jws.JWS.sign(headers.alg, headers, JSON.stringify(claims), key);\n    return jwt;\n  };\n\n  postJWT(getJWT());\n\n  const handleClientLoad = () => {\n    gapi.load(\"client:auth2\", initClient);\n  };\n\n  const initClient = () => {\n    var CLIENT_ID = \"714844314792-7qpq28p5nb943776gms8rin859iodaua.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyDFjwcJ8OuJP24_WCn-bxX1LsJMCSvBsl8\";\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\", \"https://sheets.googleapis.com/$discovery/rest?version=v4\"];\n    var SCOPES = \"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/spreadsheets.readonly\";\n    gapi.client.init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: DISCOVERY_DOCS,\n      scope: SCOPES\n    }).then(() => {//gapi.auth2.getAuthInstance().signIn();\n      //console.log(gapi.auth2.getAuthInstance().isSignedIn.get());\n      //getClasses();\n    });\n  };\n\n  const getClasses = () => {\n    var sheetID; // GET SPECIFIC SPREADSHEETID FROM GOOGLE DRIVE\n\n    gapi.client.drive.files.list({\n      q: \"name = \" + \"'\" + userEmail + \"'\" // eslint-disable-line prefer-template\n\n    }).then(response => {\n      sheetID = response.result.files[0].id;\n      setSheetID(sheetID); // GET CLASSES FROM GOOGLE SHEET\n\n      gapi.client.sheets.spreadsheets.get({\n        spreadsheetId: sheetID\n      }).then(response => {\n        setClassMetaData(response.result.sheets);\n      });\n    });\n  };\n\n  const getStudents = () => {\n    var className; // GET STUDENTS FROM EACH CLASS\n\n    classMetaData.map(data => {\n      className = data.properties.title;\n      gapi.client.sheets.spreadsheets.values.get({\n        spreadsheetId: sheetID,\n        range: className\n      }).then(response => {\n        console.log(\" Students: \", response.result.values);\n      });\n    });\n  };\n\n  getStudents();\n  useEffect(() => {\n    handleClientLoad();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Test, \"f4uWxfl1gSD+IWbfTwb/g4NbUSc=\");\n\n_c = Test;\nexport default Test;\n\nvar _c;\n\n$RefreshReg$(_c, \"Test\");","map":{"version":3,"sources":["C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/src/components/Dashboard/test.js"],"names":["React","useContext","useState","useEffect","AccountContext","gapi","KEYUTIL","KJUR","Test","userEmail","classMetaData","setClassMetaData","classArray","setClassArray","sheetID","setSheetID","postJWT","jwt","callback","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","console","log","access_token","parameters","encodeURIComponent","open","setRequestHeader","send","getCert","cert","type","project_id","private_key_id","private_key","client_email","client_id","auth_uri","token_uri","auth_provider_x509_cert_url","client_x509_cert_url","getJWT","key","getKey","headers","alg","typ","issued","Math","floor","Date","getTime","claims","iss","scope","aud","exp","iat","jws","JWS","sign","JSON","stringify","handleClientLoad","load","initClient","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","client","init","apiKey","clientId","discoveryDocs","then","getClasses","drive","files","list","q","response","result","id","sheets","spreadsheets","get","spreadsheetId","getStudents","className","map","data","properties","title","values","range"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport { AccountContext } from \"../Authentication/Account\";\r\nimport gapi from \"gapi-client\";\r\nimport { KEYUTIL, KJUR } from \"jsrsasign\";\r\nimport \"jsrsasign-util\";\r\n\r\nconst Test = () => {\r\n  const { userEmail } = useContext(AccountContext);\r\n  const [classMetaData, setClassMetaData] = useState([]);\r\n  const [classArray, setClassArray] = useState([]);\r\n  const [sheetID, setSheetID] = useState(\"\");\r\n\r\n  const postJWT = (jwt, callback) => {\r\n    var xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = function () {\r\n      if (this.readyState == 4) {\r\n        if (this.status == 200 && callback) {\r\n          callback(this.responseText);\r\n          return;\r\n        }\r\n        if (console) console.log(this.responseText[access_token]);\r\n      }\r\n    };\r\n    var parameters =\r\n      \"grant_type=\" +\r\n      encodeURIComponent(\"urn:ietf:params:oauth:grant-type:jwt-bearer\") +\r\n      \"&assertion=\" +\r\n      encodeURIComponent(jwt);\r\n    xhttp.open(\"POST\", \"https://www.googleapis.com/oauth2/v4/token\", true);\r\n    xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n    xhttp.send(parameters);\r\n  };\r\n\r\n  const getCert = () => {\r\n    var cert =\r\n      //your json key (downloaded earlier) goes here\r\n      {\r\n        type: \"service_account\",\r\n        project_id: \"raspitar-308103\",\r\n        private_key_id: \"164e561ec656424d08ccf096df4590d5d2e94c5d\",\r\n        private_key:\r\n          \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC3TcW7jZysBZjK\\n2MHNGAmBZKJ2Ch+PNTwW98u7b3M5eRm0eInlUEVz+0/pzKA2BrUXoqIiW8CAiZCT\\nvLW1gMBndodIUgZZS9t0hyKpj33IYh77vD14oaZCyCQxV6hBRRaStiaoBHdCiHzi\\nzOP+AMuFmSQnp90VYZLQ2dNaoQINbsVnGtxtsowyjRFvxV/Gu0C1nS1kneEZsXqZ\\nWJGDGDSVbtM0ZZmOy23UGzelWfoY1ltrJ2R5Im9PhMNcI5Rq51DOsO5QM6ksdhX4\\nBDYUa7eSl2Dt6LGvf0zK1wGdHLHX8M3WfurS3hMdIprRGvWHeVYrusgduic4vjBB\\nKUHktoihAgMBAAECggEAAP+edSAXW2SIaYp2u8xGuPq4W9ZAR8Jtel6NMI8x3H1J\\nY49IiQQ/7JrQ26AuuzycHe3X3kILsWeObw+XGc8CvU2K/RzdRf1Ay8i0qqHKeJ34\\nNzzWROL0ieaXM+GbXAepUNFHMqEbmTQvIfklwMt2UFr+NG0YqjYm25ZkLVk1LqeK\\ndM95jE6Dpc0zx/DOGhC9vXNZFW5JWNOOQVIuklXGYRPI71sa55PfxSK//LMbm1y4\\nqMzBG+pwtQLA/P+x5jAdhUTdyoz78cCsj/20Uzv26+TiVBIX+B4Qm0DPKryLBaVm\\nY8gnWLi+mJ+mbGF49x63JD5tcazhK54fswoRE7WS5QKBgQDjvL5u223kkc6MOjbj\\nJcDKmxTZoZ1EcFQsHB25Pgv5zeD6EplLjQSvL202S4AUsrSgXRXumrXmQ7UVRbi+\\nrPAG2UA4davhGBcXTq3mNQibIxlfrJj73A1Gv/dxtMeNG5J0vONBFz+Dpxb3uY58\\nYa3GUp4Syv1byjESRiHklojfiwKBgQDODV5Seo9DufMqwPfePtmdZ+ovWVM8fbEl\\ntCHS4R/LvK4buFuJCRsckxjDW+8wWyPd0YlHfqhS8PLRZvVOS/BTuO1wttZOXRIK\\nYADAf86P/OXSrUnx6O7+pL+1hZUjKn9O7jFxLCL+WHfiLGs9NF2o+bCm6GBmruDJ\\n9uTcY/D+AwKBgQC3SEfa4C5pLg+VO6TA2rl2ValKHY98bQrRFS+2zgDFYrQVjrJg\\n43VJqFm0wL6r6ccE6OWlyk1qrEMog5xTmMr0OBQ/XDSgS8sJrwC1rSjn8i+RmE7n\\nJAprTkPO9zdCkVYlLX+X+yXaxrbtWCEcaWB5pDQj28pb/TXRBzBvz9cIUQKBgGqP\\nxVj4Y0EOWLCirU21yUs7Y4RrOL3O7x9lohxyKsRt5skVNdmP6QKFHEhkMjYa3Fiq\\nNcnQufJzA9DB41lDsp1JxRoGpJxQS7Ur4xeqwUP78UtcLSK7aWYuA6s302IlZ0OF\\nsfIqdkp9rDo+6JL1kv6BaxdWlAxmooAwfDlyQj7LAoGBAKerxJuF9hn3uhjhUQC6\\nXS1ttKCiEmps392JckerTc7sRXWVzGRxo3d+b73We2H2JrYtmd7f16fw5nYfLMLV\\nNMqhZ0hv1kxFTj/22yDu1FHx3rTgGEwmAUIl6uDFc+8mqIdGg5GEVonPJHq+yW9f\\n7SRwj7JJL2Dugiz8wv1JHo9t\\n-----END PRIVATE KEY-----\\n\",\r\n        client_email: \"raspitar@raspitar-308103.iam.gserviceaccount.com\",\r\n        client_id: \"115460138632126755033\",\r\n        auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\r\n        token_uri: \"https://oauth2.googleapis.com/token\",\r\n        auth_provider_x509_cert_url:\r\n          \"https://www.googleapis.com/oauth2/v1/certs\",\r\n        client_x509_cert_url:\r\n          \"https://www.googleapis.com/robot/v1/metadata/x509/raspitar%40raspitar-308103.iam.gserviceaccount.com\",\r\n      };\r\n    return cert;\r\n  };\r\n\r\n  const getJWT = () => {\r\n    var cert = getCert();\r\n    var key = KEYUTIL.getKey(cert.private_key);\r\n    var headers = { alg: \"RS256\", typ: \"JWT\" };\r\n    var issued = Math.floor(new Date().getTime() / 1000);\r\n\r\n    var claims = {\r\n      iss: cert.client_email,\r\n      scope: \"https://www.googleapis.com/auth/analytics.readonly\",\r\n      aud: \"https://www.googleapis.com/oauth2/v4/token\",\r\n      exp: issued + 3600,\r\n      iat: issued,\r\n    };\r\n\r\n    var jwt = KJUR.jws.JWS.sign(\r\n      headers.alg,\r\n      headers,\r\n      JSON.stringify(claims),\r\n      key\r\n    );\r\n    return jwt;\r\n  };\r\n\r\n  postJWT(getJWT());\r\n\r\n  const handleClientLoad = () => {\r\n    gapi.load(\"client:auth2\", initClient);\r\n  };\r\n\r\n  const initClient = () => {\r\n    var CLIENT_ID =\r\n      \"714844314792-7qpq28p5nb943776gms8rin859iodaua.apps.googleusercontent.com\";\r\n    var API_KEY = \"AIzaSyDFjwcJ8OuJP24_WCn-bxX1LsJMCSvBsl8\";\r\n\r\n    var DISCOVERY_DOCS = [\r\n      \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\",\r\n      \"https://sheets.googleapis.com/$discovery/rest?version=v4\",\r\n    ];\r\n    var SCOPES =\r\n      \"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/spreadsheets.readonly\";\r\n\r\n    gapi.client\r\n      .init({\r\n        apiKey: API_KEY,\r\n        clientId: CLIENT_ID,\r\n        discoveryDocs: DISCOVERY_DOCS,\r\n        scope: SCOPES,\r\n      })\r\n      .then(() => {\r\n        //gapi.auth2.getAuthInstance().signIn();\r\n        //console.log(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n        //getClasses();\r\n      });\r\n  };\r\n\r\n  const getClasses = () => {\r\n    var sheetID;\r\n\r\n    // GET SPECIFIC SPREADSHEETID FROM GOOGLE DRIVE\r\n    gapi.client.drive.files\r\n      .list({\r\n        q: \"name = \" + \"'\" + userEmail + \"'\", // eslint-disable-line prefer-template\r\n      })\r\n      .then((response) => {\r\n        sheetID = response.result.files[0].id;\r\n        setSheetID(sheetID);\r\n        // GET CLASSES FROM GOOGLE SHEET\r\n        gapi.client.sheets.spreadsheets\r\n          .get({\r\n            spreadsheetId: sheetID,\r\n          })\r\n          .then((response) => {\r\n            setClassMetaData(response.result.sheets);\r\n          });\r\n      });\r\n  };\r\n\r\n  const getStudents = () => {\r\n    var className;\r\n    // GET STUDENTS FROM EACH CLASS\r\n    classMetaData.map((data) => {\r\n      className = data.properties.title;\r\n\r\n      gapi.client.sheets.spreadsheets.values\r\n        .get({\r\n          spreadsheetId: sheetID,\r\n          range: className,\r\n        })\r\n        .then((response) => {\r\n          console.log(\" Students: \", response.result.values);\r\n        });\r\n    });\r\n  };\r\n\r\n  getStudents();\r\n\r\n  useEffect(() => {\r\n    handleClientLoad();\r\n  }, []);\r\n  return <div></div>;\r\n};\r\n\r\nexport default Test;\r\n"]},"metadata":{},"sourceType":"module"}