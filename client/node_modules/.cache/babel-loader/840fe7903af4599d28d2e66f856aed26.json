{"ast":null,"code":"import _regeneratorRuntime from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Row,Col,Container,ListGroup,Spinner,Button,Form}from\"react-bootstrap\";import CsvDownload from\"react-json-to-csv\";import AWS from\"aws-sdk\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AttendanceList=function AttendanceList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),attendanceArray=_useState2[0],setAttendanceArray=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),attendanceList=_useState4[0],setAttendanceList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dates=_useState6[0],setDates=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showAttendance=_useState8[0],setShowAttendance=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),selectedDate=_useState10[0],setSelectedDate=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),selectedClass=_useState12[0],setSelectedClass=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),studentList=_useState14[0],setstudentList=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),absentList=_useState16[0],setAbsentList=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),isLoading=_useState18[0],setIsLoading=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isSave=_useState20[0],setIsSave=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),editStatus=_useState22[0],setEditStatus=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),removeStudents=_useState24[0],setRemoveStudents=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),addStudents=_useState26[0],setAddStudents=_useState26[1];var setUpdateData=props.setUpdateData;// AWS DynamoDB Config\nAWS.config.update({region:\"ap-southeast-1\",accessKeyId:\"AKIAVT4QMHKTJR6VFAEN\",secretAccessKey:\"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\"});var dynamodbClient=new AWS.DynamoDB.DocumentClient();var TABLE_NAME=\"March\";useEffect(function(){var mounted=true;var dateArray=[];var studentList=[];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,studentArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/aws/api\").then(function(res){return res.json();});case 2:response=_context.sent;_context.next=5;return fetch(\"/sheet/student\").then(function(res){return res.json();});case 5:studentArray=_context.sent;// Get Student List\n// Convert array to object\nstudentArray.forEach(function(res){studentList.push({Name:res[0],ID:res[1]});});response.sort(function(a,b){// Sort to latest date\nreturn new Date(b.Date)-new Date(a.Date);});response.forEach(function(data){dateArray.push(data.Date.split(\" \")[0]);});dateArray=_toConsumableArray(new Set(dateArray));// Remove Duplicates\nif(mounted){setAttendanceArray(response);setDates(dateArray);setstudentList(studentList);setIsLoading(false);}case 11:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();return function(){mounted=false;};},[]);var afterSaveHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,attendance,absentList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/aws/api\").then(function(res){return res.json();});case 2:response=_context2.sent;// Get Student Attendance\nresponse.sort(function(a,b){// Sort to latest date\nreturn new Date(b.Date)-new Date(a.Date);});attendance=response.filter(function(res// Filter Attendance By Selected Date\n){return res.Date.includes(selectedDate);});// Filter absent students\nabsentList=studentList.filter(function(_ref3){var id1=_ref3.Name;return!attendance.some(function(_ref4){var id2=_ref4.Name;return id2===id1;});});setAttendanceList(attendance);setAbsentList(absentList);setUpdateData(true);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function afterSaveHandler(){return _ref2.apply(this,arguments);};}();var getAttendanceList=function getAttendanceList(date){var absentList;var selectedDate=date;var attendance=attendanceArray.filter(function(res// Filter Attendance By Selected Date\n){return res.Date.includes(selectedDate);});// Filter absent students\nabsentList=studentList.filter(function(_ref5){var id1=_ref5.Name;return!attendance.some(function(_ref6){var id2=_ref6.Name;return id2===id1;});});setSelectedClass(attendance[0].Class);setSelectedDate(date);setAttendanceList(attendance);setAbsentList(absentList);setShowAttendance(true);};var removeStudentHandler=function removeStudentHandler(e,student){var checked=e.target.checked;var removeList=_toConsumableArray(removeStudents);if(checked){removeList=removeList.filter(function(item){return item.Name!==student.Name;});setRemoveStudents(removeList);}else{removeList=[].concat(_toConsumableArray(removeStudents),[student]);setRemoveStudents(removeList);}};var addStudentHandler=function addStudentHandler(e,student){var checked=e.target.checked;var addList=_toConsumableArray(addStudents);if(checked){addList=[].concat(_toConsumableArray(addStudents),[student]);setAddStudents(addList);}else{addList=addList.filter(function(item){return item.Name!==student.Name;});setAddStudents(addList);}};var saveHandler=function saveHandler(){// Add Student\naddStudents.forEach(function(student){var saveParams={TableName:TABLE_NAME,Item:{Date:selectedDate,Name:student.Name,Class:selectedClass,\"Student ID\":student.ID}};dynamodbClient.put(saveParams,function(err,data){if(err){console.error(\"Unable to add item. Error JSON:\",JSON.stringify(err,null,2));}else{console.log(\"Added item:\",JSON.stringify(data,null,2));}});});//Remove Student\nremoveStudents.forEach(function(student){var deleteParams={TableName:TABLE_NAME,Key:{Date:student.Date,Name:student.Name}};dynamodbClient.delete(deleteParams,function(err,data){if(err){console.error(\"Unable to delete item. Error JSON:\",JSON.stringify(err,null,2));}else{console.log(\"DeleteItem succeeded:\",JSON.stringify(data,null,2));}});});setTimeout(function(){setIsSave(false);setEditStatus(false);setAddStudents([]);setRemoveStudents([]);afterSaveHandler();},1500);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{className:\"text-center attendancelist\",children:showAttendance?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{style:{fontWeight:\"bold\",color:\"white\",textAlign:\"left\",marginTop:\"10px\",marginBottom:\"10px\"},children:selectedDate})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:\"white\"},children:\"Attended\"}),attendanceList.map(function(student){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:\"bold\",fontSize:\"calc(0.5rem + 0.6vw)\",color:\"#535353\",textAlign:\"left\"},children:student.Name}),/*#__PURE__*/_jsxs(Col,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:\"bold\",fontSize:\"calc(0.5rem + 0.6vw)\",color:\"#535353\",textAlign:\"right\"},children:[student.Temperature,\" \\xB0C\"]}),editStatus===true&&/*#__PURE__*/_jsx(Col,{xl:3,lg:3,md:3,sm:3,xs:3,children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",defaultChecked:true,onChange:function onChange(e){removeStudentHandler(e,student);}})})]})},student.Name);}),/*#__PURE__*/_jsx(\"h3\",{style:{color:\"white\",marginTop:\"5px\"},children:\"Absent\"}),absentList.map(function(student){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xl:6,lg:6,md:6,sm:6,xs:6,style:{fontWeight:\"bold\",fontSize:\"calc(0.5rem + 0.6vw)\",color:\"#535353\",textAlign:\"left\"},children:student.Name}),/*#__PURE__*/_jsx(Col,{xl:3,lg:3,md:3,sm:3,xs:3,style:{fontWeight:\"bold\",fontSize:\"calc(0.5rem + 0.6vw)\",color:\"#535353\",textAlign:\"right\"},children:student.ID}),editStatus===true&&/*#__PURE__*/_jsx(Col,{xl:3,lg:3,md:3,sm:3,xs:3,children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",onChange:function onChange(e){addStudentHandler(e,student);}})})]})},student.Name);})]})})}),editStatus===false&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{style:{width:\"100%\",backgroundColor:\"white\",color:\"#535353\",fontWeight:\"bold\",marginTop:\"10px\"},onClick:function onClick(){return setEditStatus(true);},children:\"Edit\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(CsvDownload,{data:attendanceList,filename:selectedDate+\" \"+selectedClass+\".csv\",style:{width:\"100%\",backgroundColor:\"white\",color:\"#535353\",fontWeight:\"bold\",marginTop:\"10px\",borderRadius:\"5px\",borderColor:\"#007bff\",padding:\".375rem .75rem\"},children:\"Download\"})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{style:{width:\"100%\",backgroundColor:\"white\",color:\"#535353\",fontWeight:\"bold\",marginTop:\"10px\"},onClick:function onClick(){return setShowAttendance(false);},children:\"Back\"})})})]}),editStatus===true&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{disabled:removeStudents.length===0&&addStudents.length===0,style:{width:\"100%\",backgroundColor:\"white\",color:\"#535353\",fontWeight:\"bold\",marginTop:\"10px\",borderColor:\"#007bff\"},onClick:function onClick(){setIsSave(true);saveHandler();},children:isSave?/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Save\"})})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{style:{width:\"100%\",backgroundColor:\"white\",color:\"#535353\",fontWeight:\"bold\",marginTop:\"10px\",borderColor:\"#007bff\"},onClick:function onClick(){setAddStudents([]);setRemoveStudents([]);setEditStatus(false);},children:\"Cancel\"})})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{style:{fontWeight:\"bold\",color:\"white\",textAlign:\"left\",marginTop:\"10px\",marginBottom:\"10px\"},children:\"Attendance List\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:isLoading?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",style:{color:\"white\"}}):/*#__PURE__*/_jsxs(_Fragment,{children:[dates.length===0&&/*#__PURE__*/_jsx(\"h3\",{style:{color:\"white\"},children:\"No Data\"}),dates.length>0&&/*#__PURE__*/_jsx(ListGroup,{children:dates.map(function(date){return/*#__PURE__*/_jsx(ListGroup.Item,{id:date,action:true,onClick:function onClick(e){return getAttendanceList(e.target.id);},style:{fontWeight:\"bold\",color:\"#535353\"},children:date},date);})})]})})})]})})});};export default AttendanceList;","map":{"version":3,"sources":["C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/src/components/Dashboard/Classes/AttendanceList.js"],"names":["React","useState","useEffect","Row","Col","Container","ListGroup","Spinner","Button","Form","CsvDownload","AWS","AttendanceList","props","attendanceArray","setAttendanceArray","attendanceList","setAttendanceList","dates","setDates","showAttendance","setShowAttendance","selectedDate","setSelectedDate","selectedClass","setSelectedClass","studentList","setstudentList","absentList","setAbsentList","isLoading","setIsLoading","isSave","setIsSave","editStatus","setEditStatus","removeStudents","setRemoveStudents","addStudents","setAddStudents","setUpdateData","config","update","region","accessKeyId","secretAccessKey","dynamodbClient","DynamoDB","DocumentClient","TABLE_NAME","mounted","dateArray","getData","fetch","then","res","json","response","studentArray","forEach","push","Name","ID","sort","a","b","Date","data","split","Set","afterSaveHandler","attendance","filter","includes","id1","some","id2","getAttendanceList","date","Class","removeStudentHandler","e","student","checked","target","removeList","item","addStudentHandler","addList","saveHandler","saveParams","TableName","Item","put","err","console","error","JSON","stringify","log","deleteParams","Key","delete","setTimeout","fontWeight","color","textAlign","marginTop","marginBottom","map","fontSize","Temperature","width","backgroundColor","borderRadius","borderColor","padding","length","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Container,\r\n  ListGroup,\r\n  Spinner,\r\n  Button,\r\n  Form,\r\n} from \"react-bootstrap\";\r\nimport CsvDownload from \"react-json-to-csv\";\r\nimport AWS from \"aws-sdk\";\r\n\r\nconst AttendanceList = (props) => {\r\n  const [attendanceArray, setAttendanceArray] = useState([]);\r\n  const [attendanceList, setAttendanceList] = useState([]);\r\n  const [dates, setDates] = useState([]);\r\n  const [showAttendance, setShowAttendance] = useState(false);\r\n  const [selectedDate, setSelectedDate] = useState(\"\");\r\n  const [selectedClass, setSelectedClass] = useState(\"\");\r\n  const [studentList, setstudentList] = useState([]);\r\n  const [absentList, setAbsentList] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSave, setIsSave] = useState(false);\r\n  const [editStatus, setEditStatus] = useState(false);\r\n  const [removeStudents, setRemoveStudents] = useState([]);\r\n  const [addStudents, setAddStudents] = useState([]);\r\n\r\n  const setUpdateData = props.setUpdateData;\r\n\r\n  // AWS DynamoDB Config\r\n  AWS.config.update({\r\n    region: \"ap-southeast-1\",\r\n    accessKeyId: \"AKIAVT4QMHKTJR6VFAEN\",\r\n    secretAccessKey: \"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\",\r\n  });\r\n\r\n  const dynamodbClient = new AWS.DynamoDB.DocumentClient();\r\n  const TABLE_NAME = \"March\";\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    let dateArray = [];\r\n    let studentList = [];\r\n\r\n    const getData = async () => {\r\n      const response = await fetch(\"/aws/api\").then((res) => res.json()); // Get Student Attendance\r\n      const studentArray = await fetch(\"/sheet/student\").then((res) =>\r\n        res.json()\r\n      ); // Get Student List\r\n\r\n      // Convert array to object\r\n      studentArray.forEach((res) => {\r\n        studentList.push({\r\n          Name: res[0],\r\n          ID: res[1],\r\n        });\r\n      });\r\n\r\n      response.sort((a, b) => {\r\n        // Sort to latest date\r\n        return new Date(b.Date) - new Date(a.Date);\r\n      });\r\n\r\n      response.forEach((data) => {\r\n        dateArray.push(data.Date.split(\" \")[0]);\r\n      });\r\n\r\n      dateArray = [...new Set(dateArray)]; // Remove Duplicates\r\n\r\n      if (mounted) {\r\n        setAttendanceArray(response);\r\n        setDates(dateArray);\r\n        setstudentList(studentList);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    getData();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const afterSaveHandler = async () => {\r\n    const response = await fetch(\"/aws/api\").then((res) => res.json()); // Get Student Attendance\r\n\r\n    response.sort((a, b) => {\r\n      // Sort to latest date\r\n      return new Date(b.Date) - new Date(a.Date);\r\n    });\r\n\r\n    const attendance = response.filter(\r\n      (\r\n        res // Filter Attendance By Selected Date\r\n      ) => res.Date.includes(selectedDate)\r\n    );\r\n\r\n    // Filter absent students\r\n    const absentList = studentList.filter(\r\n      ({ Name: id1 }) => !attendance.some(({ Name: id2 }) => id2 === id1)\r\n    );\r\n\r\n    setAttendanceList(attendance);\r\n    setAbsentList(absentList);\r\n    setUpdateData(true);\r\n  };\r\n\r\n  const getAttendanceList = (date) => {\r\n    let absentList;\r\n    const selectedDate = date;\r\n    const attendance = attendanceArray.filter(\r\n      (\r\n        res // Filter Attendance By Selected Date\r\n      ) => res.Date.includes(selectedDate)\r\n    );\r\n\r\n    // Filter absent students\r\n    absentList = studentList.filter(\r\n      ({ Name: id1 }) => !attendance.some(({ Name: id2 }) => id2 === id1)\r\n    );\r\n\r\n    setSelectedClass(attendance[0].Class);\r\n    setSelectedDate(date);\r\n    setAttendanceList(attendance);\r\n    setAbsentList(absentList);\r\n    setShowAttendance(true);\r\n  };\r\n\r\n  const removeStudentHandler = (e, student) => {\r\n    let checked = e.target.checked;\r\n    let removeList = [...removeStudents];\r\n\r\n    if (checked) {\r\n      removeList = removeList.filter((item) => item.Name !== student.Name);\r\n      setRemoveStudents(removeList);\r\n    } else {\r\n      removeList = [...removeStudents, student];\r\n      setRemoveStudents(removeList);\r\n    }\r\n  };\r\n\r\n  const addStudentHandler = (e, student) => {\r\n    let checked = e.target.checked;\r\n    let addList = [...addStudents];\r\n\r\n    if (checked) {\r\n      addList = [...addStudents, student];\r\n      setAddStudents(addList);\r\n    } else {\r\n      addList = addList.filter((item) => item.Name !== student.Name);\r\n      setAddStudents(addList);\r\n    }\r\n  };\r\n\r\n  const saveHandler = () => {\r\n    // Add Student\r\n    addStudents.forEach((student) => {\r\n      const saveParams = {\r\n        TableName: TABLE_NAME,\r\n        Item: {\r\n          Date: selectedDate,\r\n          Name: student.Name,\r\n          Class: selectedClass,\r\n          \"Student ID\": student.ID,\r\n        },\r\n      };\r\n\r\n      dynamodbClient.put(saveParams, function (err, data) {\r\n        if (err) {\r\n          console.error(\r\n            \"Unable to add item. Error JSON:\",\r\n            JSON.stringify(err, null, 2)\r\n          );\r\n        } else {\r\n          console.log(\"Added item:\", JSON.stringify(data, null, 2));\r\n        }\r\n      });\r\n    });\r\n\r\n    //Remove Student\r\n    removeStudents.forEach((student) => {\r\n      const deleteParams = {\r\n        TableName: TABLE_NAME,\r\n        Key: {\r\n          Date: student.Date,\r\n          Name: student.Name,\r\n        },\r\n      };\r\n\r\n      dynamodbClient.delete(deleteParams, function (err, data) {\r\n        if (err) {\r\n          console.error(\r\n            \"Unable to delete item. Error JSON:\",\r\n            JSON.stringify(err, null, 2)\r\n          );\r\n        } else {\r\n          console.log(\"DeleteItem succeeded:\", JSON.stringify(data, null, 2));\r\n        }\r\n      });\r\n    });\r\n\r\n    setTimeout(() => {\r\n      setIsSave(false);\r\n      setEditStatus(false);\r\n      setAddStudents([]);\r\n      setRemoveStudents([]);\r\n      afterSaveHandler();\r\n    }, 1500);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container className=\"text-center attendancelist\">\r\n        {showAttendance ? (\r\n          <>\r\n            <Row>\r\n              <Col>\r\n                <h3\r\n                  style={{\r\n                    fontWeight: \"bold\",\r\n                    color: \"white\",\r\n                    textAlign: \"left\",\r\n                    marginTop: \"10px\",\r\n                    marginBottom: \"10px\",\r\n                  }}\r\n                >\r\n                  {selectedDate}\r\n                </h3>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <ListGroup>\r\n                  <h3 style={{ color: \"white\" }}>Attended</h3>\r\n                  {attendanceList.map((student) => {\r\n                    return (\r\n                      <ListGroup.Item key={student.Name}>\r\n                        <Row>\r\n                          <Col\r\n                            xl={6}\r\n                            lg={6}\r\n                            md={6}\r\n                            sm={6}\r\n                            xs={6}\r\n                            style={{\r\n                              fontWeight: \"bold\",\r\n                              fontSize: \"calc(0.5rem + 0.6vw)\",\r\n                              color: \"#535353\",\r\n                              textAlign: \"left\",\r\n                            }}\r\n                          >\r\n                            {student.Name}\r\n                          </Col>\r\n                          <Col\r\n                            xl={3}\r\n                            lg={3}\r\n                            md={3}\r\n                            sm={3}\r\n                            xs={3}\r\n                            style={{\r\n                              fontWeight: \"bold\",\r\n                              fontSize: \"calc(0.5rem + 0.6vw)\",\r\n                              color: \"#535353\",\r\n                              textAlign: \"right\",\r\n                            }}\r\n                          >\r\n                            {student.Temperature} °C\r\n                          </Col>\r\n                          {editStatus === true && (\r\n                            <Col xl={3} lg={3} md={3} sm={3} xs={3}>\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                defaultChecked\r\n                                onChange={(e) => {\r\n                                  removeStudentHandler(e, student);\r\n                                }}\r\n                              />\r\n                            </Col>\r\n                          )}\r\n                        </Row>\r\n                      </ListGroup.Item>\r\n                    );\r\n                  })}\r\n                  <h3 style={{ color: \"white\", marginTop: \"5px\" }}>Absent</h3>\r\n                  {absentList.map((student) => {\r\n                    return (\r\n                      <ListGroup.Item key={student.Name}>\r\n                        <Row>\r\n                          <Col\r\n                            xl={6}\r\n                            lg={6}\r\n                            md={6}\r\n                            sm={6}\r\n                            xs={6}\r\n                            style={{\r\n                              fontWeight: \"bold\",\r\n                              fontSize: \"calc(0.5rem + 0.6vw)\",\r\n                              color: \"#535353\",\r\n                              textAlign: \"left\",\r\n                            }}\r\n                          >\r\n                            {student.Name}\r\n                          </Col>\r\n                          <Col\r\n                            xl={3}\r\n                            lg={3}\r\n                            md={3}\r\n                            sm={3}\r\n                            xs={3}\r\n                            style={{\r\n                              fontWeight: \"bold\",\r\n                              fontSize: \"calc(0.5rem + 0.6vw)\",\r\n                              color: \"#535353\",\r\n                              textAlign: \"right\",\r\n                            }}\r\n                          >\r\n                            {student.ID}\r\n                          </Col>\r\n                          {editStatus === true && (\r\n                            <Col xl={3} lg={3} md={3} sm={3} xs={3}>\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                onChange={(e) => {\r\n                                  addStudentHandler(e, student);\r\n                                }}\r\n                              />\r\n                            </Col>\r\n                          )}\r\n                        </Row>\r\n                      </ListGroup.Item>\r\n                    );\r\n                  })}\r\n                </ListGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n            {editStatus === false && (\r\n              <>\r\n                <Row>\r\n                  <Col>\r\n                    <Button\r\n                      style={{\r\n                        width: \"100%\",\r\n                        backgroundColor: \"white\",\r\n                        color: \"#535353\",\r\n                        fontWeight: \"bold\",\r\n                        marginTop: \"10px\",\r\n                      }}\r\n                      onClick={() => setEditStatus(true)}\r\n                    >\r\n                      Edit\r\n                    </Button>\r\n                  </Col>\r\n                  <Col>\r\n                    <CsvDownload\r\n                      data={attendanceList}\r\n                      filename={selectedDate + \" \" + selectedClass + \".csv\"}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        backgroundColor: \"white\",\r\n                        color: \"#535353\",\r\n                        fontWeight: \"bold\",\r\n                        marginTop: \"10px\",\r\n                        borderRadius: \"5px\",\r\n                        borderColor: \"#007bff\",\r\n                        padding: \".375rem .75rem\",\r\n                      }}\r\n                    >\r\n                      Download\r\n                    </CsvDownload>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button\r\n                      style={{\r\n                        width: \"100%\",\r\n                        backgroundColor: \"white\",\r\n                        color: \"#535353\",\r\n                        fontWeight: \"bold\",\r\n                        marginTop: \"10px\",\r\n                      }}\r\n                      onClick={() => setShowAttendance(false)}\r\n                    >\r\n                      Back\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </>\r\n            )}\r\n            {editStatus === true && (\r\n              <>\r\n                <Row>\r\n                  <Col>\r\n                    <Button\r\n                      disabled={\r\n                        removeStudents.length === 0 && addStudents.length === 0\r\n                      }\r\n                      style={{\r\n                        width: \"100%\",\r\n                        backgroundColor: \"white\",\r\n                        color: \"#535353\",\r\n                        fontWeight: \"bold\",\r\n                        marginTop: \"10px\",\r\n                        borderColor: \"#007bff\",\r\n                      }}\r\n                      onClick={() => {\r\n                        setIsSave(true);\r\n                        saveHandler();\r\n                      }}\r\n                    >\r\n                      {isSave ? (\r\n                        <Spinner\r\n                          as=\"span\"\r\n                          animation=\"border\"\r\n                          size=\"sm\"\r\n                          role=\"status\"\r\n                          aria-hidden=\"true\"\r\n                        />\r\n                      ) : (\r\n                        <span>Save</span>\r\n                      )}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button\r\n                      style={{\r\n                        width: \"100%\",\r\n                        backgroundColor: \"white\",\r\n                        color: \"#535353\",\r\n                        fontWeight: \"bold\",\r\n                        marginTop: \"10px\",\r\n                        borderColor: \"#007bff\",\r\n                      }}\r\n                      onClick={() => {\r\n                        setAddStudents([]);\r\n                        setRemoveStudents([]);\r\n                        setEditStatus(false);\r\n                      }}\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Row>\r\n              <Col>\r\n                <h3\r\n                  style={{\r\n                    fontWeight: \"bold\",\r\n                    color: \"white\",\r\n                    textAlign: \"left\",\r\n                    marginTop: \"10px\",\r\n                    marginBottom: \"10px\",\r\n                  }}\r\n                >\r\n                  Attendance List\r\n                </h3>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                {isLoading ? (\r\n                  <Spinner animation=\"border\" style={{ color: \"white\" }} />\r\n                ) : (\r\n                  <>\r\n                    {dates.length === 0 && (\r\n                      <h3 style={{ color: \"white\" }}>No Data</h3>\r\n                    )}\r\n                    {dates.length > 0 && (\r\n                      <ListGroup>\r\n                        {dates.map((date) => {\r\n                          return (\r\n                            <ListGroup.Item\r\n                              key={date}\r\n                              id={date}\r\n                              action\r\n                              onClick={(e) => getAttendanceList(e.target.id)}\r\n                              style={{ fontWeight: \"bold\", color: \"#535353\" }}\r\n                            >\r\n                              {date}\r\n                            </ListGroup.Item>\r\n                          );\r\n                        })}\r\n                      </ListGroup>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </Col>\r\n            </Row>\r\n          </>\r\n        )}\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AttendanceList;\r\n"]},"metadata":{},"sourceType":"module"}