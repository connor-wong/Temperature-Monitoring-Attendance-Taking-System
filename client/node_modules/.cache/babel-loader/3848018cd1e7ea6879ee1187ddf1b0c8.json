{"ast":null,"code":"import _slicedToArray from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{CognitoUser}from\"amazon-cognito-identity-js\";import Pool from\"../../UserPool\";import{Form,Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ForgetPassword=function ForgetPassword(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),stage=_useState2[0],setStage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),code=_useState6[0],setCode=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmPassword=_useState10[0],setConfirmPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var getUser=function getUser(){return new CognitoUser({Username:email.toLowerCase(),Pool:Pool});};var sendCode=function sendCode(event){event.preventDefault();getUser().forgotPassword({onSuccess:function onSuccess(data){console.log(\"onSuccess:\",data);},onFailure:function onFailure(err){console.error(\"onFailure:\",err);},inputVerificationCode:function inputVerificationCode(data){console.log(\"Input code:\",data);setStage(2);}});};var resetPassword=function resetPassword(event){event.preventDefault();if(password!==confirmPassword){setMessage(\"Passwords does not match.\");//console.error(\"Passwords are not the same.\");\nreturn;}getUser().confirmPassword(code,password,{onSuccess:function onSuccess(data){setMessage(\"Password reset successfully.\");console.log(\"onSuccess:\",data);window.location.reload(false);},onFailure:function onFailure(err){setMessage(\"Incorrect verification code.\");console.error(\"onFailure:\",err);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[stage===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"calc(2rem + 2vw)\",fontWeight:\"bold\",marginBottom:\"20px\"},children:\"Forget Password?\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:sendCode,children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,placeholder:\"Email\",onChange:function onChange(event){return setEmail(event.target.value);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\",marginBottom:\"10px\"},children:\"Send verification code\"})]}),/*#__PURE__*/_jsx(Button,{style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\"},onClick:function onClick(){window.location.reload(false);},children:\"Cancel\"})]}),stage===2&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"calc(2rem + 2vw)\",fontWeight:\"bold\",marginBottom:\"20px\"},children:\"Set New Password\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:resetPassword,children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{value:code,placeholder:\"Verification Code\",onChange:function onChange(event){return setCode(event.target.value);}})}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicNewPassword\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,placeholder:\"New Password\",onChange:function onChange(event){return setPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicConfirmPassword\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:confirmPassword,placeholder:\"Confirm Password\",onChange:function onChange(event){return setConfirmPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\",marginBottom:\"10px\"},children:\"Reset Password\"})]}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"18px\",color:\"red\",textAlign:\"center\"},children:message})]})]});};export default ForgetPassword;","map":{"version":3,"sources":["C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/src/components/Authentication/ForgetPassword.js"],"names":["React","useState","CognitoUser","Pool","Form","Button","ForgetPassword","stage","setStage","email","setEmail","code","setCode","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","getUser","Username","toLowerCase","sendCode","event","preventDefault","forgotPassword","onSuccess","data","console","log","onFailure","err","error","inputVerificationCode","resetPassword","window","location","reload","fontSize","fontWeight","marginBottom","target","value","width","backgroundColor","color","textAlign"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { CognitoUser } from \"amazon-cognito-identity-js\";\r\nimport Pool from \"../../UserPool\";\r\n\r\nimport { Form, Button } from \"react-bootstrap\";\r\n\r\nconst ForgetPassword = () => {\r\n  const [stage, setStage] = useState(1);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const getUser = () => {\r\n    return new CognitoUser({\r\n      Username: email.toLowerCase(),\r\n      Pool,\r\n    });\r\n  };\r\n\r\n  const sendCode = (event) => {\r\n    event.preventDefault();\r\n\r\n    getUser().forgotPassword({\r\n      onSuccess: (data) => {\r\n        console.log(\"onSuccess:\", data);\r\n      },\r\n      onFailure: (err) => {\r\n        console.error(\"onFailure:\", err);\r\n      },\r\n      inputVerificationCode: (data) => {\r\n        console.log(\"Input code:\", data);\r\n        setStage(2);\r\n      },\r\n    });\r\n  };\r\n\r\n  const resetPassword = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (password !== confirmPassword) {\r\n      setMessage(\"Passwords does not match.\");\r\n      //console.error(\"Passwords are not the same.\");\r\n      return;\r\n    }\r\n\r\n    getUser().confirmPassword(code, password, {\r\n      onSuccess: (data) => {\r\n        setMessage(\"Password reset successfully.\");\r\n        console.log(\"onSuccess:\", data);\r\n        window.location.reload(false);\r\n      },\r\n      onFailure: (err) => {\r\n        setMessage(\"Incorrect verification code.\");\r\n        console.error(\"onFailure:\", err);\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {stage === 1 && (\r\n        <>\r\n          <h3\r\n            style={{\r\n              fontSize: \"calc(2rem + 2vw)\",\r\n              fontWeight: \"bold\",\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            Forget Password?\r\n          </h3>\r\n          <Form onSubmit={sendCode}>\r\n            <Form.Group controlId=\"formBasicEmail\">\r\n              <Form.Control\r\n                type=\"email\"\r\n                value={email}\r\n                placeholder=\"Email\"\r\n                onChange={(event) => setEmail(event.target.value)}\r\n              />\r\n            </Form.Group>\r\n            <Button\r\n              type=\"submit\"\r\n              style={{\r\n                width: \"100%\",\r\n                backgroundColor: \"#3241c9\",\r\n                fontSize: \"22px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            >\r\n              Send verification code\r\n            </Button>\r\n          </Form>\r\n          <Button\r\n            style={{\r\n              width: \"100%\",\r\n              backgroundColor: \"#3241c9\",\r\n              fontSize: \"22px\",\r\n            }}\r\n            onClick={() => {\r\n              window.location.reload(false);\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </>\r\n      )}\r\n\r\n      {stage === 2 && (\r\n        <>\r\n          <h3\r\n            style={{\r\n              fontSize: \"calc(2rem + 2vw)\",\r\n              fontWeight: \"bold\",\r\n              marginBottom: \"20px\",\r\n            }}\r\n          >\r\n            Set New Password\r\n          </h3>\r\n          <Form onSubmit={resetPassword}>\r\n            <Form.Group controlId=\"formBasicEmail\">\r\n              <Form.Control\r\n                value={code}\r\n                placeholder=\"Verification Code\"\r\n                onChange={(event) => setCode(event.target.value)}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formBasicNewPassword\">\r\n              <Form.Control\r\n                type=\"password\"\r\n                value={password}\r\n                placeholder=\"New Password\"\r\n                onChange={(event) => setPassword(event.target.value)}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formBasicConfirmPassword\">\r\n              <Form.Control\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                placeholder=\"Confirm Password\"\r\n                onChange={(event) => setConfirmPassword(event.target.value)}\r\n              />\r\n            </Form.Group>\r\n            <Button\r\n              type=\"submit\"\r\n              style={{\r\n                width: \"100%\",\r\n                backgroundColor: \"#3241c9\",\r\n                fontSize: \"22px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n            >\r\n              Reset Password\r\n            </Button>\r\n          </Form>\r\n          <h3\r\n            style={{\r\n              fontSize: \"18px\",\r\n              color: \"red\",\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            {message}\r\n          </h3>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgetPassword;\r\n"]},"metadata":{},"sourceType":"module"}