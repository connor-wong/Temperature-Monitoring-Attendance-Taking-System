{"ast":null,"code":"import _slicedToArray from\"C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{AccountContext}from\"./Account\";import{Row,Col,Container,Form,Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewPassword=function NewPassword(){var _useContext=useContext(AccountContext),user=_useContext.user,userAttr=_useContext.userAttr;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirmPassword=_useState4[0],setConfirmPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var changePassword=function changePassword(event){event.preventDefault();delete userAttr.email_verified;if(password!==confirmPassword){setMessage(\"Passwords does not match.\");//console.error(\"Passwords are not the same\");\nreturn;}else{user.completeNewPasswordChallenge(password,userAttr,{onSuccess:function onSuccess(result){setMessage(\"New password created successfully.\");console.log(result);window.location.reload(false);},onFailure:function onFailure(err){setMessage(\"Error, please contact administrator.\");console.log(err);}});}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{className:\"newpassword\",fluid:true,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"calc(1rem + 2vw)\",fontWeight:\"bold\"},children:\"Logging in for the first time?\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"calc(1rem + 1vw)\",fontWeight:\"normal\",color:\"#848484\"},children:\"Set your new password\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:changePassword,children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicNewPassword\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,placeholder:\"New Password\",onChange:function onChange(event){return setPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formBasicConfirmPassword\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:confirmPassword,placeholder:\"Confirm Password\",onChange:function onChange(event){return setConfirmPassword(event.target.value);}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\",marginBottom:\"10px\"},children:\"Reset Password\"})]}),/*#__PURE__*/_jsx(Button,{style:{width:\"100%\",backgroundColor:\"#3241c9\",fontSize:\"22px\",marginBottom:\"10px\"},onClick:function onClick(){window.location.reload(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"18px\",color:\"red\",textAlign:\"center\"},children:message})]})})})});};export default NewPassword;","map":{"version":3,"sources":["C:/School Stuff/Modules/2021 Sem One/Final Year Project/Temperature Monitoring And Attendance Taking System/Web Interface Prototype/raspitar/client/src/components/Authentication/NewPassword.js"],"names":["React","useState","useContext","AccountContext","Row","Col","Container","Form","Button","NewPassword","user","userAttr","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","changePassword","event","preventDefault","email_verified","completeNewPasswordChallenge","onSuccess","result","console","log","window","location","reload","onFailure","err","fontSize","fontWeight","color","target","value","width","backgroundColor","marginBottom","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { AccountContext } from \"./Account\";\r\n\r\nimport { Row, Col, Container, Form, Button } from \"react-bootstrap\";\r\n\r\nconst NewPassword = () => {\r\n  const { user, userAttr } = useContext(AccountContext);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const changePassword = (event) => {\r\n    event.preventDefault();\r\n\r\n    delete userAttr.email_verified;\r\n\r\n    if (password !== confirmPassword) {\r\n      setMessage(\"Passwords does not match.\");\r\n      //console.error(\"Passwords are not the same\");\r\n      return;\r\n    } else {\r\n      user.completeNewPasswordChallenge(password, userAttr, {\r\n        onSuccess: (result) => {\r\n          setMessage(\"New password created successfully.\");\r\n          console.log(result);\r\n          window.location.reload(false);\r\n        },\r\n        onFailure: (err) => {\r\n          setMessage(\"Error, please contact administrator.\");\r\n          console.log(err);\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container className=\"newpassword\" fluid>\r\n        <Row>\r\n          <Col>\r\n            <h3\r\n              style={{\r\n                fontSize: \"calc(1rem + 2vw)\",\r\n                fontWeight: \"bold\",\r\n              }}\r\n            >\r\n              Logging in for the first time?\r\n            </h3>\r\n            <h3\r\n              style={{\r\n                fontSize: \"calc(1rem + 1vw)\",\r\n                fontWeight: \"normal\",\r\n                color: \"#848484\",\r\n              }}\r\n            >\r\n              Set your new password\r\n            </h3>\r\n            <Form onSubmit={changePassword}>\r\n              <Form.Group controlId=\"formBasicNewPassword\">\r\n                <Form.Control\r\n                  type=\"password\"\r\n                  value={password}\r\n                  placeholder=\"New Password\"\r\n                  onChange={(event) => setPassword(event.target.value)}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"formBasicConfirmPassword\">\r\n                <Form.Control\r\n                  type=\"password\"\r\n                  value={confirmPassword}\r\n                  placeholder=\"Confirm Password\"\r\n                  onChange={(event) => setConfirmPassword(event.target.value)}\r\n                />\r\n              </Form.Group>\r\n              <Button\r\n                type=\"submit\"\r\n                style={{\r\n                  width: \"100%\",\r\n                  backgroundColor: \"#3241c9\",\r\n                  fontSize: \"22px\",\r\n                  marginBottom: \"10px\",\r\n                }}\r\n              >\r\n                Reset Password\r\n              </Button>\r\n            </Form>\r\n            <Button\r\n              style={{\r\n                width: \"100%\",\r\n                backgroundColor: \"#3241c9\",\r\n                fontSize: \"22px\",\r\n                marginBottom: \"10px\",\r\n              }}\r\n              onClick={() => {\r\n                window.location.reload(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <h3\r\n              style={{\r\n                fontSize: \"18px\",\r\n                color: \"red\",\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              {message}\r\n            </h3>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPassword;\r\n"]},"metadata":{},"sourceType":"module"}